{"version":3,"sources":["../../../src/protocol/types.ts","../../../src/storage/contentProvider.ts","../../../src/types/ILessonData.ts","../../../src/storage/activeTabProvider.ts","../../../src/communcation/minecraftCommander.ts","../../../../src/communcation/Commands/CodebuilderRuntime.ts","../../../src/mocks/mockMinecraftCommander.ts","../../../src/mocks/mockIpcTelemetry.ts","../../../src/mocks/mockIpcWorldStorage.ts","../../src/config.ts","../../../src/components/ButtonsPanel.tsx","../../../src/localization/en.ts","../../../src/localization/zh-cn.ts","../../../src/components/OutputPanel.tsx","../../../src/protocol/index.ts","../../../src/protocol/runtime.ts","../../../src/protocol/mockRuntime.ts","../../src/cellSettingsProcessor.ts","../../src/theme.ts","components/Tab.tsx","components/TabDropdown.tsx","components/TabArrow.tsx","components/Tabs.tsx","telemetry.ts","components/Notebook.tsx","types.ts","components/FooterButtons.tsx","notebookViewController.tsx","localization/en.ts","evergladeSettings.ts","localization/index.ts","localization/zh-cn.ts","components/ErrorBoundary.tsx","lessonData.ts","azureNotebookLoader.ts","index.tsx","../../src/index.ts","../../src/types.ts","../../src/extensionSettings.ts","../../../../src/communcation/Commands/Commands.ts","../../src/UrlReader.ts","../../../src/mocks/mockEvent.ts","../../src/logger.ts","../../../src/types/ipcWorldStorage.ts","../../../../src/communcation/Commands/Scoreboard.ts","../../../src/localization/index.ts"],"names":["exports","this","ipcRenderer","RuntimeAction","config","mainFrame","showStatusBar","showCommandBar","showCellBanner","showCellVerticalToolbar","showCellToolbar","enableDragDrop","theme","keyboardShortcuts","ctrlEnter","shiftEnter","codeCell","prompt","showCounter","showExecuteButton","outputs","precedingComponents","editor","showLineNumber","markdownCell","viewOnly","logger","readOnly","numberOfLinesInEditor","base","variables","monacoTheme","inherit","rules","colors","Tab","React","forwardRef","props","ref","myClassName","isActive","id","toString","className","role","data-toggle","aria-controls","aria-selected","data-tabindex","onClick","name","displayName","TabDropdown","aria-haspopup","aria-expanded","Tabs","map","idx","path","key","bind","DropdownOption","Component","TabArrow","classId","isLeftArrow","isDisabled","undefined","ipcTelemetry","tabContainer","leftArrow","rightArrow","dropDown","tabs","resizeTimeout","select","onActivate","resizeCallback","Array","leftArrowRef","createRef","forEach","push","state","showNavigationTabs","navBarStartIndex","navBarEndIndex","length","anchorRight","navBarTotalWidth","url","tabIndex","repopulate","window","addEventListener","initalizeWidths","prevProps","prevState","activeTabIndex","current","offsetWidth","totalWidth","shouldDisplay","updateNavBarEndIndex","onclick","currentWidth","setState","width","isResize","clientWidth","repopulateRightAnchored","repopulateLeftAnchored","shouldUseRightAnchored","forceUpdate","clearTimeout","setTimeout","isShown","removeEventListener","getIpcTelemetry","MockIpcTelemetry","register","location","href","aznbErrorListener","error","Notebook","rootElement","document","getElementById","console","warn","activate","notebookUrl","_","nextState","FooterButtons","classes","previousButton","disabled","aria-hidden","nextButton","NotebookViewController","LessonData","TelemetryProvider","ActiveTabProvider","hasLoaded","tabProps","activeTabPath","onActivateByIndex","e","localStorage","MinecraftCommander","getInstance","MockMinecraftCommander","component","initEvent","components","telemetry","comp","func","a","startTime","performance","now","details","timeElapsed","Math","trunc","getLessonData","setName","creatorName","title","azureNotebookLoader","initalize","params","language","load","notebookCount","message","log","filename","isLanguageSupported","additionalLanguages","rootNotebookPath","tabIndexFunctor","get","lessonJsonPath","activityTracker","data","activitySelectorObjective","then","activeTab","Promise","all","pages","page","getNotebookPath","contentProvider","notebook","metadata","minecraft","page_name","Error","pagePaths","index","getTabPathFromIndex","setContext","loadComponent","ErrorBoundaryMessage","ErrorInfoPrefix","settings","ps","origin","result","Object","keys","k","createPesudoStrings","en","strings","LocalizedStrings","setLanguage","ErrorBoundary","telemetryLogger","hasError","errorMessage","locStrings","getLanguage","children","defaultIsLanguageSupported","lang","includes","bypassCache","httpOptions","method","headers","create","mode","cache","fetch","response","json","ValidateLessonData","catch","AzureNotebookLoader","rootElementId","isInitalized","locale","MinecraftExtension","AzureNotebooks","registerExtension","init","resourceUrl","userHasGivenCookieConsent","lazyLoadEditor","getResourceIdAndKey","resolve","notebookResourceId","notebookResourceKey","filepath","loadNotebook","parentElementId","filePath","disableOutputIframe","showSurveyBar","mapLocaleToAznbLocale","extensions","nb","compute","targetUrl","getAuthSettings","authType","token","shouldMount","setCompute","targetSettings","parameters","ExtractUrlParams","JSON","stringify","ReactDOM","render","GetLessonData","disableLessonDataCache","NotebookContentProvider","logToConsole","extension","context","noop","formatMsg","msg","CodeStatus","en_1","default"],"mappings":"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","file":"static/js/main.9604ef94.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResultMessages = {\n    CompilationSucceeds: \"Compilation completes successfully!\",\n    ExecutionSucceeds: \"Execution completes successfully!\",\n    ExecutionCancelled: \"Execution is cancelled.\"\n};\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass NotebookContentError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"NotebookContentError\";\n    }\n}\nexports.NotebookContentError = NotebookContentError;\n/**\n *  Handles retriving Notebook contents from the web or local cache.\n *       Services that manage the storage url should adhere to the following:\n *       - We expect etag to be present in the request header with 'etag' as string. (Make sure header is exposed under CORS)\n *       - We expect Conditional GET's with  `If-None-Match: ${etag}` to work.\n *       - For local file access to work, thr url should handle local file CORS access.\n */\nclass NotebookContentProvider {\n    constructor(localStorageProvider, logger = console) {\n        this.baseKey = \"meeaznb/\";\n        this.localStorageProvider = localStorageProvider;\n        this.logger = logger;\n    }\n    clear(all = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (all) {\n                this.localStorageProvider.clear();\n            }\n            else {\n                for (let i = 0; i < this.localStorageProvider.length; i++) {\n                    let val = this.localStorageProvider.key(i);\n                    if (val.startsWith(this.baseKey)) {\n                        this.localStorageProvider.removeItem(val);\n                    }\n                }\n            }\n        });\n    }\n    buildKey(url) {\n        return this.baseKey + url;\n    }\n    save(url, notebook) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.localStorageProvider.setItem(this.buildKey(url), JSON.stringify(notebook));\n        });\n    }\n    /**\n     *\n     * @param url - The Notebook url where we will fetch content.\n     * @param shouldCache - If this is disabled we don't cache the content.\n     */\n    get(url, shouldCache = true) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            let jsonContent = {};\n            let localEtag;\n            {\n                let content = this.localStorageProvider.getItem(this.buildKey(url));\n                if (content) {\n                    try {\n                        jsonContent = JSON.parse(content);\n                        localEtag = (_a = jsonContent === null || jsonContent === void 0 ? void 0 : jsonContent.metadata) === null || _a === void 0 ? void 0 : _a.etag;\n                    }\n                    catch (e) {\n                        this.logger.log(\"Invalid json found, disregarding content. Error:\" + e.message);\n                    }\n                }\n            }\n            const httpOptions = {\n                method: \"GET\",\n                headers: Object.create(null),\n                mode: \"cors\",\n                cache: \"no-store\" // Don't use platform cache anything, we handle it with localEtags ourselves.\n            };\n            if (localEtag) {\n                httpOptions.headers = Object.assign(Object.assign({}, httpOptions.headers), { \"If-None-Match\": localEtag });\n            }\n            try {\n                let response = yield fetch(url, httpOptions);\n                if (response.ok) {\n                    try {\n                        let notebook = yield response.json();\n                        if (!notebook.metadata) {\n                            notebook.metadata = new Object();\n                        }\n                        notebook.metadata.etag = response.headers.get(\"etag\");\n                        if (shouldCache) {\n                            this.save(url, notebook);\n                        }\n                        return notebook;\n                    }\n                    catch (e) {\n                        throw e;\n                    }\n                }\n                else {\n                    if (response.status === 304) {\n                        this.logger.log(`Using localstorage cache for ${url}`);\n                        return jsonContent;\n                    }\n                    else {\n                        throw new NotebookContentError(response.statusText);\n                    }\n                }\n            }\n            catch (e) {\n                throw new NotebookContentError(e.message);\n            }\n        });\n    }\n}\nexports.NotebookContentProvider = NotebookContentProvider;\n//# sourceMappingURL=contentProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Validates data that is coming from an external source.\nfunction ValidateLessonData(json) {\n    return (json.creatorName &&\n        typeof json.creatorName === \"string\" &&\n        json.title &&\n        typeof json.title === \"string\" &&\n        json.description &&\n        typeof json.description === \"string\" &&\n        json.pages &&\n        json.pages instanceof Array &&\n        json.pages.length > 0 &&\n        json.pages.every((element) => {\n            return typeof element === \"string\";\n        }));\n}\nexports.ValidateLessonData = ValidateLessonData;\nvar ActivityTrackerType;\n(function (ActivityTrackerType) {\n    ActivityTrackerType[\"scoreboard\"] = \"scoreboard\";\n})(ActivityTrackerType = exports.ActivityTrackerType || (exports.ActivityTrackerType = {}));\n//# sourceMappingURL=ILessonData.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Scoreboard_1 = require(\"../communcation/Commands/Scoreboard\");\nclass ActiveTabProvider {\n    constructor(localStorageProvider, minecraftCommandProvider, logger = console) {\n        this.baseKey = \"meeaznb/\";\n        this.localStorageProvider = localStorageProvider;\n        this.minecraftCommander = minecraftCommandProvider;\n        this.logger = logger;\n    }\n    buildKey(id) {\n        return this.baseKey + id;\n    }\n    get(lessonId, objective, callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (objective && callback) {\n                this.minecraftCommander.subscribe(new Scoreboard_1.CodeBuilderScoreChangedCommand(true), (result) => {\n                    callback({ activeTabIndex: result.Score });\n                });\n                let scoreboardValue = yield this.minecraftCommander.send(new Scoreboard_1.GetAndListenScoreboardCommand(objective, \"@s\", false));\n                if (scoreboardValue && scoreboardValue > 0) {\n                    return { activeTabIndex: scoreboardValue };\n                }\n            }\n            let content = this.localStorageProvider.getItem(this.buildKey(lessonId));\n            if (content) {\n                let num = Number(content);\n                if (!isNaN(num) && num > 0) {\n                    return { activeTabIndex: num };\n                }\n            }\n            else {\n                return undefined;\n            }\n        });\n    }\n    set(lessonId, activeTab) {\n        this.localStorageProvider.setItem(this.buildKey(lessonId), activeTab.activeTabIndex.toString());\n    }\n}\nexports.ActiveTabProvider = ActiveTabProvider;\n//# sourceMappingURL=activeTabProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MinecraftCommander {\n    constructor(ipcRenderer, logger = console) {\n        this.ipcRenderer = ipcRenderer;\n        this.logger = logger;\n        this.eventQueue = new Map();\n        this.subscriptionQueue = new Map();\n        this.ipcRenderer.on(\"responseFromApp\", (eventName, event) => {\n            try {\n                let data = JSON.parse(event);\n                if (data && data.header && data.body) {\n                    if (data.header.messagePurpose == \"event\") {\n                        if (data.body.eventName && this.subscriptionQueue.has(data.body.eventName)) {\n                            const [command, callback] = this.subscriptionQueue.get(data.body.eventName);\n                            try {\n                                let payload = command.parse(data.body);\n                                callback(payload);\n                            }\n                            catch (e) {\n                                logger.log(`Swallowing: ipcRenderer Response Error: ${e}`);\n                            }\n                        }\n                    }\n                    else {\n                        if (this.eventQueue.has(data.header.requestId)) {\n                            const [command, resolve, reject] = this.eventQueue.get(data.header.requestId);\n                            this.eventQueue.delete(data.header.requestId);\n                            try {\n                                resolve(command.responseHandler(data));\n                            }\n                            catch (e) {\n                                reject(e);\n                            }\n                        }\n                    }\n                }\n            }\n            catch (e) {\n                this.logger.error(`Swallowing: ${e.message}`);\n            }\n        });\n    }\n    static getInstance(ipcRenderer, logger = console) {\n        if (!MinecraftCommander.instance) {\n            MinecraftCommander.instance = new MinecraftCommander(ipcRenderer, logger);\n        }\n        return MinecraftCommander.instance;\n    }\n    subscribe(command, callback) {\n        if (this.ipcRenderer && command.request.body.eventName) {\n            this.subscriptionQueue.set(command.request.body.eventName, [command, callback]);\n            this.ipcRenderer.sendToHost(\"sendToApp\", command.request);\n        }\n        else {\n            throw new Error(\"Error: Could not send command. IpcRenderer not available OR Subscription command is invalid.\");\n        }\n    }\n    send(commandJson) {\n        if (this.ipcRenderer) {\n            console.log(`Sending Message: ${commandJson.request}`);\n            return new Promise((resolve, reject) => {\n                this.eventQueue.set(commandJson.request.header.requestId, [commandJson, resolve, reject]);\n                this.ipcRenderer.sendToHost(\"sendToApp\", commandJson.request);\n            });\n        }\n        else {\n            throw new Error(\"Error: Could not send command. IpcRenderer not available.\");\n        }\n    }\n    on(event, listener) {\n        this.ipcRenderer.on(event, listener);\n    }\n    removeListener(event, listener) {\n        this.ipcRenderer.removeListener(event, listener);\n    }\n    once(event, listener) {\n        this.ipcRenderer.once(event, listener);\n    }\n}\nexports.MinecraftCommander = MinecraftCommander;\n//# sourceMappingURL=minecraftCommander.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Commands_1 = require(\"./Commands\");\nvar RuntimeAction;\n(function (RuntimeAction) {\n    RuntimeAction[\"Start\"] = \"Start\";\n    RuntimeAction[\"Stop\"] = \"Stop\";\n    RuntimeAction[\"Pause\"] = \"Pause\";\n})(RuntimeAction = exports.RuntimeAction || (exports.RuntimeAction = {}));\nclass CodebuidlerRuntimeActionCommand extends Commands_1.GenericListenerCommand {\n    constructor(throwOnError = false) {\n        super(`CodeBuilderRuntimeAction`, throwOnError);\n    }\n    parse(body) {\n        if (body.properties && body.properties.RuntimeAction !== undefined) {\n            return { RuntimeAction: body.properties.RuntimeAction };\n        }\n        else {\n            throw new Error(`CodebuidlerRuntimeActionCommand::Parse does not contain required values body: ${JSON.stringify(body)}`);\n        }\n    }\n}\nexports.CodebuidlerRuntimeActionCommand = CodebuidlerRuntimeActionCommand;\n//# sourceMappingURL=CodebuilderRuntime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mockEvent_1 = require(\"./mockEvent\");\nconst UrlReader_1 = require(\"../UrlReader\");\nclass MockMinecraftCommander extends mockEvent_1.MockEvent {\n    constructor(callback) {\n        super();\n        this.callback = callback;\n        if (UrlReader_1.IsInGame()) {\n            throw new Error(\"Currently in game. MockCommander shouldnt be enalbed.\");\n        }\n        else {\n            console.log(\"Creating Mock Mincraft Commander\");\n        }\n    }\n    subscribe(command, callback) {\n        console.log(\"Subscription1!!\");\n    }\n    send(command) {\n        if (this.callback) {\n            return this.callback.onSend(command);\n        }\n        else {\n            console.log(`MockMinecraftCommander.send:${command.request}`);\n            Promise.resolve(undefined);\n        }\n    }\n}\nexports.MockMinecraftCommander = MockMinecraftCommander;\n//# sourceMappingURL=mockMinecraftCommander.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mockEvent_1 = require(\"./mockEvent\");\nconst UrlReader_1 = require(\"../UrlReader\");\nclass MockIpcTelemetry extends mockEvent_1.MockEvent {\n    constructor(callbacks) {\n        super();\n        this.callbacks = callbacks;\n        if (UrlReader_1.IsInGame()) {\n            throw new Error(\"Currently in game. Mock shouldnt be enalbed.\");\n        }\n        else {\n            console.log(\"Creating Mock IpcTelemetry\");\n        }\n    }\n    register(editorName, url, context) {\n        if (this.callbacks) {\n            this.callbacks.register(editorName, url, context);\n        }\n        else {\n            this.setUrl(url);\n            this.setName(editorName);\n            this.setContext(context);\n        }\n    }\n    setUrl(url) {\n        if (this.callbacks) {\n            this.callbacks.setUrl(url);\n        }\n        else {\n            this.url = url;\n        }\n    }\n    setContext(context) {\n        if (this.callbacks) {\n            this.callbacks.setContext(context);\n        }\n        else {\n            this.context = context;\n        }\n    }\n    setName(name) {\n        if (this.callbacks) {\n            this.callbacks.setName(name);\n        }\n        else {\n            this.editorName = name;\n        }\n    }\n    log(message) {\n        if (this.callbacks) {\n            this.callbacks.log(message);\n        }\n        else {\n            console.log(`MockIpcTelemetry: ${message}`);\n        }\n    }\n    warn(message) {\n        if (this.callbacks) {\n            this.callbacks.warn(message);\n        }\n        else {\n            console.warn(`MockIpcTelemetry: ${message}`);\n        }\n    }\n    error(message) {\n        if (this.callbacks) {\n            this.callbacks.error(message);\n        }\n        else {\n            console.error(`MockIpcTelemetry: ${message}`);\n        }\n    }\n}\nexports.MockIpcTelemetry = MockIpcTelemetry;\n//# sourceMappingURL=mockIpcTelemetry.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ipcWorldStorage_1 = require(\"../types/ipcWorldStorage\");\nconst mockEvent_1 = require(\"./mockEvent\");\nclass MockIpcWorldStorage extends mockEvent_1.MockEvent {\n    constructor(callbacks) {\n        super();\n        this.callbacks = callbacks;\n        this.codeStatus = ipcWorldStorage_1.CodeStatus.notStarted;\n        console.log(\"Creating Mock IpcWorldStorage\");\n    }\n    setCodeStatus(codeStatus) {\n        if (this.callbacks) {\n            this.callbacks.setCodeStatus(codeStatus);\n        }\n        else {\n            this.codeStatus = codeStatus;\n        }\n    }\n}\nexports.MockIpcWorldStorage = MockIpcWorldStorage;\n//# sourceMappingURL=mockIpcWorldStorage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst types_1 = require(\"./types\");\nconst config = {\n    mainFrame: {\n        showStatusBar: false,\n        showCommandBar: false,\n        showCellBanner: false,\n        showCellVerticalToolbar: false,\n        showCellToolbar: false,\n        enableDragDrop: false,\n        theme: \"minecraft\",\n        keyboardShortcuts: {\n            ctrlEnter: true,\n            shiftEnter: false\n        }\n    },\n    codeCell: {\n        prompt: {\n            showCounter: false,\n            showExecuteButton: false\n        },\n        outputs: {\n            precedingComponents: [\n                {\n                    key: \"buttonspanel\",\n                    component: \"ButtonsPanel\"\n                }\n            ]\n        },\n        editor: {\n            showLineNumber: true\n        }\n    },\n    markdownCell: {\n        viewOnly: true\n    },\n    // Description of each option can be found at https://devdiv.visualstudio.com/DevDiv/_git/AzureNotebooks?path=%2Fdocs%2Fapi%2Fextension-contract.imonacoeditoroptions.md&_a=preview&version=GBmaster\n    // The options are exact the same options get passed into monaco-editors, you can also test and play with the options on monaco's playground app:\n    // https://microsoft.github.io/monaco-editor/playground.html#creating-the-editor-editor-basic-options\n    monacoOptions: {\n        wordWrap: \"on\",\n        lineNumbersMinChars: 3,\n        scrollbar: {\n            vertical: \"auto\"\n        },\n        quickSuggestions: {\n            other: false,\n            comments: false,\n            strings: false\n        },\n        parameterHints: {\n            enabled: false\n        },\n        suggestOnTriggerCharacters: false,\n        acceptSuggestionOnEnter: \"off\",\n        tabCompletion: \"off\",\n        wordBasedSuggestions: false,\n        contextmenu: false,\n        gotoLocation: { multiple: \"goto\" },\n        codeLens: false,\n        lightbulb: { enabled: false }\n    },\n    compute: {\n        protocol: types_1.MyComputeProtocol\n    },\n    cellSettingProcessors: [\"minecraft-metadata\"]\n};\nexports.default = config;\n//# sourceMappingURL=config.js.map","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = __importStar(require(\"react\"));\nconst types_1 = require(\"../types\");\nconst logger_1 = require(\"../logger\");\nconst localization_1 = require(\"../localization\");\nconst OutputPanel_1 = require(\"./OutputPanel\");\nconst core_library_1 = require(\"core-library\");\nconst logger = logger_1.createLogger(\"ButtonsPanel\");\n/**\n * Panel to place buttons\n */\nclass ButtonsPanel extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.myRef = React.createRef();\n        this.onRunButtonClicked = this.onRunButtonClicked.bind(this);\n        this.onStopButtonClicked = this.onStopButtonClicked.bind(this);\n        this.onResetCodeButtonClicked = this.onResetCodeButtonClicked.bind(this);\n        this.onResetWorldButtonClicked = this.onResetWorldButtonClicked.bind(this);\n        this.minecraftCommander = (window === null || window === void 0 ? void 0 : window.ipcRenderer) ? core_library_1.MinecraftCommander.getInstance(window.ipcRenderer)\n            : new core_library_1.MockMinecraftCommander();\n        this.ipcWorldStorage = (window === null || window === void 0 ? void 0 : window.ipcWorldStorage) ? window.ipcWorldStorage : new core_library_1.MockIpcWorldStorage();\n    }\n    componentDidMount() {\n        const isReadOnlyEditor = this.props.settings.editor.readOnly;\n        if (isReadOnlyEditor) {\n            const locStrings = localization_1.getLocStrings();\n            var node = this.myRef.current;\n            var parentCell = node.closest(\".cell-container\");\n            const messageString = locStrings.ReadOnlyEditorMessage\n                ? locStrings.ReadOnlyEditorMessage\n                : \"HARDCODED: Example Code - Read Only\";\n            parentCell.setAttribute(\"data-read-only-msg\", messageString);\n        }\n    }\n    render() {\n        const { cell, settings } = this.props;\n        if (cell.cell_type !== \"code\" || settings.cellType !== \"code\") {\n            return null;\n        }\n        const locStrings = localization_1.getLocStrings();\n        const cellStatus = settings.cellStatus;\n        const isRunning = cellStatus === \"busy\" || cellStatus === \"queued\";\n        const output = cell.outputs.first(null);\n        return (React.createElement(\"div\", { ref: this.myRef, className: \"editor-buttons-panel ${isReadOnlyEditor ? 'read-only-editor-msg' : ''}\" },\n            React.createElement(\"hr\", { className: \"standard-hr\" }),\n            React.createElement(\"div\", { className: \"button-group\" },\n                isRunning ? (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onStopButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_stop\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonStop)) : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onRunButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_play\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonRun)),\n                this.shouldHideCodeReset() ? null : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onResetCodeButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_refresh\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonResetCode)),\n                this.shouldHideWorldReset() ? null : (React.createElement(\"button\", { className: \"editor-button __ButtonLiteGrey\", onClick: this.onResetWorldButtonClicked },\n                    React.createElement(\"i\", { className: \"icon icon_refresh\", \"aria-hidden\": \"true\" }),\n                    \"\\u00A0\",\n                    locStrings.ButtonResetWorld))),\n            React.createElement(OutputPanel_1.OutputPanel, { output: output, isRunning: isRunning })));\n    }\n    onRunButtonClicked() {\n        if (this.props.cell.source.length > 0) {\n            this.props.commands.notebook.cells.run(this.props.cellId);\n        }\n    }\n    onStopButtonClicked() {\n        this.props.commands.notebook.kernels.interrupt();\n    }\n    onResetCodeButtonClicked() {\n        this.props.commands.notebook.cells.clearOutputs(this.props.cellId);\n        this.props.commands.notebook.kernels.interrupt();\n        const defaultCode = this.props.cell.metadata.getIn([types_1.MetadataNamespace, \"default_code\"]);\n        let codeString = undefined;\n        if (typeof defaultCode === \"string\") {\n            codeString = defaultCode;\n        }\n        else if (Array.isArray(defaultCode)) {\n            codeString = defaultCode.join(\"\");\n        }\n        else if (codeString === undefined) {\n            codeString = \"\";\n        }\n        else {\n            // Other types are unexpected, it means the content is written in a wrong format\n            logger.log(`Error: unexpected type of default_code:'${typeof defaultCode}' defined for cell '${this.props.cellId}'`);\n        }\n        if (codeString !== undefined) {\n            this.props.commands.notebook.cells.setContent(this.props.cellId, codeString);\n        }\n        // The user has reset the code cell, so inform the world to update its CodeStatus to NotStarted\n        this.ipcWorldStorage.setCodeStatus(core_library_1.CodeStatus.notStarted);\n    }\n    onResetWorldButtonClicked() {\n        this.props.commands.notebook.kernels.interrupt();\n        const resetWorldCommand = this.props.cell.metadata.getIn([types_1.MetadataNamespace, \"resetWorldCommand\"]);\n        if (resetWorldCommand) {\n            this.minecraftCommander.send(new core_library_1.AnyCommand(resetWorldCommand));\n        }\n    }\n    shouldHideCodeReset() {\n        const defaultCode = this.props.cell.metadata.getIn([types_1.MetadataNamespace, \"default_code\"]);\n        return defaultCode == undefined;\n    }\n    shouldHideWorldReset() {\n        const resetWorldCommand = this.props.cell.metadata.getIn([types_1.MetadataNamespace, \"resetWorldCommand\"]);\n        return resetWorldCommand == undefined;\n    }\n}\nexports.ButtonsPanel = ButtonsPanel;\n//# sourceMappingURL=ButtonsPanel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    ButtonRun: \"Run\",\n    ButtonStop: \"Stop\",\n    ButtonResetCode: \"Reset Code\",\n    ButtonResetWorld: \"Reset World\",\n    ReadOnlyEditorMessage: \"Example Code - Read Only\",\n    // Messages in output panel\n    ExecutionCompletesSuccessfully: \"Execution completed successfully!\",\n    ExecutionCancelled: \"Execution is cancelled\",\n    ExecutionInProcess: \"Execution is in process\",\n    ExecutionError: \"Error: {0}\"\n};\n//# sourceMappingURL=en.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    ButtonRun: \"\",\n    ButtonStop: \"\",\n    ButtonResetCode: \"\",\n    ButtonResetWorld: \"\",\n    ReadOnlyEditorMessage: \"- \",\n    // Messages in output panel\n    ExecutionCompletesSuccessfully: \"!\",\n    ExecutionCancelled: \"\",\n    ExecutionInProcess: \"\",\n    ExecutionError: \": {0}\"\n};\n//# sourceMappingURL=zh-cn.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst types_1 = require(\"../protocol/types\");\nconst localization_1 = require(\"../localization\");\nclass OutputPanel extends react_1.default.PureComponent {\n    constructor(props) {\n        super(props);\n        this.MPS_INIT = 0;\n        this.MPS_OPEN = 1;\n        this.MPS_CLOSE = 2;\n        this.messagePanelState = this.MPS_INIT;\n    }\n    render() {\n        const { output, isRunning } = this.props;\n        const locStrings = localization_1.getLocStrings();\n        let message = \"\";\n        let stateClass = \"none\";\n        if (isRunning) {\n            message = locStrings.ExecutionInProcess;\n            stateClass = \"running\";\n            this.messagePanelState = this.MPS_OPEN;\n        }\n        else if (output) {\n            if (output.output_type === \"execute_result\") {\n                message = output.data[\"text/html\"];\n                if (message === types_1.ResultMessages.ExecutionSucceeds) {\n                    message = locStrings.ExecutionCompletesSuccessfully;\n                    stateClass = \"success\";\n                }\n                else if (message === types_1.ResultMessages.ExecutionCancelled) {\n                    message = locStrings.ExecutionCancelled;\n                    stateClass = \"warning\";\n                }\n                this.messagePanelState = this.MPS_OPEN;\n            }\n            else if (output.output_type === \"error\") {\n                message = locStrings.formatString(locStrings.ExecutionError, output.evalue);\n                stateClass = \"error\";\n                this.messagePanelState = this.MPS_OPEN;\n            }\n            else {\n                // We shouldn't fall into this branch, or it could be a bug\n                console.error(`Unexpected output_type from output:'${JSON.stringify(output)}'`);\n            }\n        }\n        else {\n            this.messagePanelState = this.MPS_CLOSE;\n        }\n        let panelStateClass = \"\";\n        switch (this.messagePanelState) {\n            case this.MPS_INIT:\n                break;\n            case this.MPS_OPEN:\n                panelStateClass = \"output-message-root--open\";\n                break;\n            case this.MPS_CLOSE:\n                panelStateClass = \"output-message-root--closed\";\n                break;\n            default:\n                console.error(\"Unhandeled messagePanelState: \" + this.messagePanelState);\n        }\n        return (react_1.default.createElement(\"div\", { className: \"output-message-root \" + panelStateClass },\n            react_1.default.createElement(\"hr\", { className: \"standard-hr\" }),\n            react_1.default.createElement(\"div\", { className: \"output-message-container \" + stateClass }, message)));\n    }\n}\nexports.OutputPanel = OutputPanel;\n//# sourceMappingURL=OutputPanel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar runtime_1 = require(\"./runtime\");\nexports.createRuntime = runtime_1.createRuntime;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable @typescript-eslint/camelcase */\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst mockRuntime_1 = require(\"./mockRuntime\");\nconst core_contract_1 = require(\"@aznb/core-contract\");\nconst types_1 = require(\"../types\");\nconst logger_1 = require(\"../logger\");\nconst core_library_1 = require(\"core-library\");\nconst types_2 = require(\"./types\");\nconst logger = logger_1.createLogger(\"Minecraft-Runtime\");\nconst createMessageStream = (ipc) => {\n    const messages = new rxjs_1.Subject();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const bridge = (eventName, payload) => {\n        messages.next({\n            eventName,\n            payload: payload ? JSON.parse(payload) : undefined\n        });\n    };\n    ipc.on(\"InitializationComplete\", bridge);\n    ipc.on(\"CompilationCompleted\", bridge);\n    ipc.on(\"ExecutionStarted\", bridge);\n    ipc.on(\"Error\", bridge);\n    ipc.on(\"Completed\", bridge);\n    return messages;\n};\n/**\n * Create a plain result\n *\n * @param {string} msg message to show in the result\n * @param {number} executionCount execution count\n * @returns {IExecutionHtmlOutput} result message to the notebook component\n */\nfunction createPlainResult(msg, executionCount) {\n    const output = {\n        type: \"html\",\n        executionCount,\n        metadata: {},\n        result: msg\n    };\n    return output;\n}\n// const redColorHeader = \"\\u001b[31m\";\n// /**\n//  * Create error marker info\n//  *\n//  * @param {number} lineNumber line number of the error\n//  * @param {string} message message to display for the error\n//  * @returns {IMarkerData} marker data\n//  */\n// function createErrorMarker(lineNumber: number, message: string): IMarkerData {\n//   return {\n//     startLineNumber: lineNumber,\n//     startColumn: 1,\n//     endLineNumber: lineNumber,\n//     endColumn: 1000,\n//     message\n//   };\n// }\n/**\n * Create error result\n *\n * @param {string} eventName name of the error\n * @param {number} lineOffset offset of line number in source where error occurs so we can adjust that in error markers\n * @param {number} executionCount execution count\n * @param {IError[]} errors errors\n * @returns {IExecutionErrorOutput} error output\n */\nfunction createErrorResult(eventName, lineOffset, executionCount, errors) {\n    const traceback = errors.map((e) => e.details);\n    const markers = errors.map((e) => {\n        // TODO: use the value from error.line after error.line is fixed to correctly locate the line with error.\n        const match = e.details.match(/line (\\d+)/);\n        const lineNumber = (match ? Number(match[1]) : e.line) + lineOffset;\n        return {\n            startLineNumber: lineNumber,\n            startColumn: 1,\n            endLineNumber: lineNumber,\n            endColumn: 1000,\n            severity: core_contract_1.EditorMarkerSeverity.Error,\n            message: e.summary\n        };\n    });\n    const errOutput = {\n        type: \"error\",\n        executionCount,\n        errorTarget: eventName,\n        errorMessage: errors.length > 0 ? errors[0].summary : \"unknown\",\n        errorDetails: traceback,\n        errorMarkers: markers,\n        metadata: {}\n    };\n    return errOutput;\n}\nconst handleCodeListener = (id, map) => {\n    if (map === null || map === void 0 ? void 0 : map.has(id)) {\n        map.get(id)();\n    }\n};\nconst messageToExecuteOutput = (message, executionCount, codeListener, metadata) => {\n    console.log(\"messageToExecuteOutput started\");\n    let msg = JSON.stringify(message.payload);\n    metadata = metadata || {};\n    const lineOffset = metadata.lineOffset || 0;\n    if (message.eventName === \"Error\") {\n        handleCodeListener(types_1.CodeListenerIds.onCodeErrorCommand, codeListener);\n        return createErrorResult(message.eventName, lineOffset, executionCount, message.payload.errors || []);\n    }\n    else if (message.eventName === \"Completed\") {\n        handleCodeListener(types_1.CodeListenerIds.onCodeStoppedCommand, codeListener);\n        const { success } = message.payload;\n        if (success === \"Succeeded\") {\n            handleCodeListener(types_1.CodeListenerIds.onCodeSuccessfulCommand, codeListener);\n            msg = types_2.ResultMessages.ExecutionSucceeds;\n        }\n        else if (success === \"Cancelled\") {\n            handleCodeListener(types_1.CodeListenerIds.onCodeCancelledCommand, codeListener);\n            msg = types_2.ResultMessages.ExecutionCancelled;\n        }\n    }\n    else if (message.eventName === \"CompilationCompleted\") {\n        const { errors } = message.payload;\n        if (!errors || errors.length === 0) {\n            msg = types_2.ResultMessages.CompilationSucceeds;\n        }\n        else {\n            return createErrorResult(message.eventName, lineOffset, executionCount, errors);\n        }\n    }\n    return createPlainResult(msg, executionCount);\n};\n/**\n * create runtime as the compute target\n *\n * @returns {IStandardComputeProtocol} a runtime supporting the {IStandardComputeProtocol}\n */\nfunction createRuntime() {\n    const clientLogger = window.ipcTelemetry\n        ? window.ipcTelemetry\n        : new core_library_1.MockIpcTelemetry();\n    const worldStorage = window.ipcWorldStorage\n        ? window.ipcWorldStorage\n        : new core_library_1.MockIpcWorldStorage();\n    const minecraftCommander = (window === null || window === void 0 ? void 0 : window.ipcRenderer) ? core_library_1.MinecraftCommander.getInstance(window.ipcRenderer)\n        : new core_library_1.MockMinecraftCommander();\n    let executionCount = 0;\n    let isInExecution = false;\n    let pythonHost;\n    let codeScreenRenderer;\n    let message$;\n    let inits$;\n    let compiles$;\n    let executionResult$;\n    const storageProvider = new core_library_1.NotebookContentProvider(localStorage, logger);\n    const statusMap = new Map();\n    statusMap.set(types_1.CodeListenerIds.onCodeStartedCommand, core_library_1.CodeStatus.inProgress);\n    statusMap.set(types_1.CodeListenerIds.onCodeCancelledCommand, core_library_1.CodeStatus.notStarted);\n    statusMap.set(types_1.CodeListenerIds.onCodeErrorCommand, core_library_1.CodeStatus.error);\n    statusMap.set(types_1.CodeListenerIds.onCodeSuccessfulCommand, core_library_1.CodeStatus.succeeded);\n    /**\n     * Initialize the compute to get ready for connection from the azure notebook component\n     *\n     * @param input parameters for initialization\n     */\n    const initialize = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`initializeCompute is called with input ${JSON.stringify(input)}`);\n        codeScreenRenderer = window.ipcCodeScreenRenderer || mockRuntime_1.createIpcCodeScreenRenderer();\n        pythonHost = window.ipcPython || mockRuntime_1.createIpcPythonMock();\n        message$ = createMessageStream(pythonHost);\n        inits$ = message$.pipe(operators_1.filter((m) => m.eventName === \"InitializationComplete\"), operators_1.first());\n        isInExecution = false;\n        message$.pipe(operators_1.filter((m) => m.eventName === \"ExecutionStarted\")).subscribe({\n            next: () => {\n                isInExecution = true;\n            }\n        });\n        executionResult$ = message$.pipe(operators_1.filter((m) => m.eventName === \"Completed\" || m.eventName === \"Error\"));\n        executionResult$.subscribe({\n            next: () => {\n                isInExecution = false;\n            }\n        });\n        compiles$ = message$.pipe(operators_1.filter((m) => m.eventName === \"CompilationCompleted\"));\n        compiles$.pipe(operators_1.tap((m) => {\n            logger.log(`Compile$ message: ${JSON.stringify(m)}`);\n        }));\n        return { message: \"done\" };\n    });\n    /**\n     * Handler to start the session when Azure Notebook Component call to connect the compute\n     *\n     * @param input parameters for establishing the connection\n     */\n    const connect = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`connectCompute is called with input ${JSON.stringify(input)}`);\n        pythonHost.initialize();\n        const result = yield inits$.toPromise();\n        return { message: `Done. Details: ${JSON.stringify(result)}` };\n    });\n    /**\n     * Handler to stop the connection when Azure Notebook Component call to disconnect from compute\n     *\n     * @param input Parameters for disconnecting the connection\n     */\n    const disconnect = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`disconnectCompute is called with input ${JSON.stringify(input)}`);\n        // TODO: anything we need to clear here?\n        return { message: \"done\" };\n    });\n    /**\n     * Gets the onCodeCommand mappings from metadata.\n     *\n     * @param cell NTeract Imutable Cell; Used to obatain relevant onCode Id's\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const getOnCodeListeners = (cell) => {\n        const codeListeners = new Map();\n        console.log(\"Started getOnCodeListeners\");\n        for (const key in types_1.CodeListenerIds) {\n            // TODO: Check if getin maps up to notebook metadata if cell is not available.\n            const val = cell.metadata.getIn([\"minecraft\", key]);\n            if (val) {\n                console.log(`Found getOnCodeListeneres ${key} --  ${val}`);\n                codeListeners.set(key, () => {\n                    const listenerId = key;\n                    if (statusMap.has(listenerId)) {\n                        worldStorage.setCodeStatus(statusMap.get(listenerId));\n                    }\n                    minecraftCommander.send(new core_library_1.AnyCommand(val));\n                });\n            }\n        }\n        return codeListeners;\n    };\n    /**\n     * Handler to execute script for a cell\n     *\n     * @param input Parameters for executing script for a cell\n     */\n    const execute = (input) => __awaiter(this, void 0, void 0, function* () {\n        const { script, cell } = input;\n        logger.log(`executeCell is called with script '${script}'`);\n        try {\n            if (isInExecution) {\n                throw \"Previous execution is not completed yet.\";\n            }\n            else {\n                executionCount++;\n                let finalizedScript = script;\n                // check if the override code is present. If it is, wrap it around the user code.\n                const overrideCode = cell.metadata.getIn([\"minecraft\", \"overridePython\"]);\n                let overrideLineOffset = 0;\n                if (overrideCode) {\n                    logger.log(`Found Override Code: '${overrideCode}'`);\n                    // Find the @usercode tag in override code\n                    const usercodeTag = \"@user-code\";\n                    const usercodeIndex = overrideCode.search(usercodeTag);\n                    // Find out the number of prefix override lines\n                    overrideLineOffset = -1 * (overrideCode.substring(0, usercodeIndex).match(/\\n/g) || []).length;\n                    // Combine override code with usercode\n                    const combinedOverrideScript = overrideCode.substring(0, usercodeIndex) +\n                        script +\n                        overrideCode.substring(usercodeIndex + usercodeTag.length);\n                    finalizedScript = combinedOverrideScript;\n                }\n                const onCodeListenerMap = getOnCodeListeners(cell);\n                handleCodeListener(types_1.CodeListenerIds.onCodeStartedCommand, onCodeListenerMap);\n                pythonHost.execute(finalizedScript);\n                clientLogger.log({\n                    action: \"execute\",\n                    codeListener: onCodeListenerMap.size,\n                    hasOverrideCode: overrideCode,\n                    scriptLength: script.length\n                });\n                // check if the closeCodeBuilderOnRun flag is on\n                const closeCodeBuilderOnRun = cell.metadata.getIn([types_1.MetadataNamespace, \"closeCodeBuilderOnRun\"]) === true;\n                if (closeCodeBuilderOnRun) {\n                    codeScreenRenderer.dismiss();\n                }\n                // return outputs\n                const output = yield executionResult$\n                    .pipe(operators_1.first(), operators_1.map((r) => messageToExecuteOutput(r, executionCount, onCodeListenerMap, {\n                    lineOffset: overrideLineOffset\n                })))\n                    .toPromise();\n                return { output };\n            }\n        }\n        catch (error) {\n            return {\n                output: {\n                    type: \"error\",\n                    errorTarget: \"sample runtime\",\n                    errorDetails: [],\n                    errorMessage: JSON.stringify(error),\n                    executionCount,\n                    metadata: {}\n                }\n            };\n        }\n    });\n    /**\n     * Handler to cancel an execution\n     *\n     * @param {IComputeInterruptOptions} input Parameters of the execution to be cancelled\n     * @returns {void}\n     */\n    const interrupt = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`interruptExecution is called with input ${JSON.stringify(input)}`);\n        pythonHost.cancel();\n    });\n    minecraftCommander.subscribe(new core_library_1.CodebuidlerRuntimeActionCommand(true), (result) => {\n        if (result && result.RuntimeAction == core_library_1.RuntimeAction.Stop) {\n            logger.log(\"interruptExecution is called from CodebuidlerRuntimeActionCommand\");\n            pythonHost.cancel();\n        }\n    });\n    /**\n     * Handler to return notebook content based on the given input parameter\n     *\n     * @param input Parameters to specify what notebook to fetch\n     */\n    const fetchContent = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`fetchContent is called with input ${JSON.stringify(input)}`);\n        const { url } = input;\n        const content = yield storageProvider.get(url, true);\n        return { content };\n    });\n    /**\n     * Handler to persist notebook to the given storage\n     *\n     * @param input Parameters contains info about the storage to persist the notebook\n     */\n    const saveContent = (input) => __awaiter(this, void 0, void 0, function* () {\n        logger.log(`saveContent is called with for url ${input.url}`);\n        yield storageProvider.save(input.url, input.content);\n        const { url } = input;\n        return { url };\n    });\n    return {\n        type: \"standard\",\n        initialize,\n        connect,\n        disconnect,\n        execute,\n        interrupt,\n        fetchContent,\n        saveContent\n    };\n}\nexports.createRuntime = createRuntime;\n//# sourceMappingURL=runtime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst logger_1 = require(\"../logger\");\nconst logger = logger_1.createLogger(\"Minecraft-Mock-Host\");\nconst ForceErrorStatement = \"!Force Error!\";\n/**\n * Determine whether we emit error for the given code\n *\n * @param {string} code source code to scan\n * @returns error payload if we are emitting error, or null if not\n */\nfunction checkError(code) {\n    if (code.indexOf(ForceErrorStatement) >= 0) {\n        const lines = code.split(\"\\n\");\n        const errorlines = [];\n        lines.forEach((l, i) => {\n            const startCol = l.indexOf(ForceErrorStatement);\n            if (startCol >= 0) {\n                const lineNumber = i + 1;\n                errorlines.push({\n                    context: \"\",\n                    details: `  File \"CodeBuilder Script\", line ${lineNumber}\n  ${l}\n  ${new Array(startCol + 1).join(\" \")}^\n  Error: Explicit Error by ${ForceErrorStatement}\n  `,\n                    line: lineNumber,\n                    summary: `Error: Explicit Error by ${ForceErrorStatement}`\n                });\n            }\n        });\n        return {\n            errors: errorlines,\n            scriptName: \"CodeBuilder Script\"\n        };\n    }\n    else {\n        return null;\n    }\n}\nconst emptyFunction = () => { };\n/**\n * create a mock runtime for testing purpose\n *\n * @returns a mock instance of ipcPython\n */\nexports.createIpcPythonMock = () => {\n    logger.log(\"createIpcPythonMock: Starting Mock!\");\n    const eventHandlers = {\n        InitializationComplete: emptyFunction,\n        CompilationCompleted: emptyFunction,\n        ExecutionStarted: emptyFunction,\n        Error: emptyFunction,\n        Completed: emptyFunction\n    };\n    let shouldCancelExecution = false;\n    const mock = {\n        initialize: () => {\n            logger.log(\"Initializing\");\n            setTimeout(() => {\n                eventHandlers.InitializationComplete({});\n                logger.log(\"Initialized\");\n            }, 1000);\n        },\n        execute: (code) => {\n            logger.log(`Executing Code:\\n${code}`);\n            eventHandlers.ExecutionStarted({});\n            shouldCancelExecution = false;\n            // complete after 3 seconds\n            setTimeout(() => {\n                if (shouldCancelExecution) {\n                    eventHandlers.Completed({\n                        details: \"\",\n                        scriptName: \"CodeBuilder Script\",\n                        success: \"Cancelled\"\n                    });\n                    logger.log(\"Cancelled Executing Code\");\n                }\n                else {\n                    const error = checkError(code);\n                    if (error) {\n                        eventHandlers.Error(error);\n                        logger.log(\"Error Executing Code\");\n                    }\n                    else {\n                        eventHandlers.Completed({\n                            details: `Executed Code: ${code}`,\n                            scriptName: \"CodeBuilder Script\",\n                            success: \"Succeeded\"\n                        });\n                        logger.log(\"Completed Executing Code\");\n                    }\n                }\n            }, 1000);\n        },\n        compile: (code) => {\n            logger.log(`Compiling Code:\\n${code}`);\n            setTimeout(() => {\n                const error = checkError(code);\n                if (error) {\n                    eventHandlers.Error(error);\n                    logger.log(\"Error Compiling Code\");\n                }\n                else {\n                    eventHandlers.CompilationCompleted({});\n                    logger.log(\"Completed Compiling Code\");\n                }\n            }, 1000);\n        },\n        cancel: () => {\n            shouldCancelExecution = true;\n            logger.log(\"Mark current execution cancelled\");\n        },\n        on: (eventName, handler) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            eventHandlers[eventName] = (payload) => handler(eventName, JSON.stringify(payload));\n        },\n        once: (eventName, handler) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            eventHandlers[eventName] = (payload) => handler(eventName, JSON.stringify(payload));\n        }\n    };\n    return mock;\n};\n/**\n * mock representation for ipcCodeScreenRenderer\n *\n * @returns {IIpcCodeScreenRenderer} mock of ipcCodeScreenRenderer\n */\nfunction createIpcCodeScreenRenderer() {\n    logger.log(\"Using Mock IPCCodeScreenRederer\");\n    const mock = {\n        dismiss: () => {\n            logger.log(\"MockHost: closing window\");\n        },\n        on: (event) => {\n            logger.log(`On event called ${event}`);\n        },\n        removeListener: (event) => {\n            logger.log(`removeListener called ${event}`);\n        },\n        once: (event) => {\n            logger.log(`once called ${event}`);\n        }\n    };\n    return mock;\n}\nexports.createIpcCodeScreenRenderer = createIpcCodeScreenRenderer;\n//# sourceMappingURL=mockRuntime.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst types_1 = require(\"./types\");\nexports.cellSettingsProcessor = (cellId, cell, settings) => {\n    let newSettings = settings;\n    // Only change the readonly setting to true when cell's metadata set readonly to true\n    const editorReadOnly = cell.metadata.getIn([types_1.MetadataNamespace, \"readonly\"]);\n    if (editorReadOnly === true && newSettings.editor.readOnly === false) {\n        newSettings = newSettings.setIn([\"editor\", \"readOnly\"], true);\n    }\n    // Check if metadata specify a valid numberOfLines, if yes then we pass that to cell settings\n    const numberOfLinesInEditor = cell.metadata.getIn([types_1.MetadataNamespace, \"numberOfLines\"]);\n    if (typeof numberOfLinesInEditor === \"number\" &&\n        numberOfLinesInEditor > 0 &&\n        numberOfLinesInEditor !== newSettings.editor.numberOfLines) {\n        newSettings = newSettings.setIn([\"editor\", \"numberOfLines\"], numberOfLinesInEditor);\n    }\n    // When metadata specify to hide the cell\n    const hideCell = cell.metadata.getIn([types_1.MetadataNamespace, \"hidden\"]);\n    if (hideCell === true && newSettings.showCell === true) {\n        newSettings = newSettings.setIn([\"showCell\"], false);\n    }\n    return newSettings;\n};\n//# sourceMappingURL=cellSettingsProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_contract_1 = require(\"@aznb/core-contract\");\nexports.theme = {\n    base: core_contract_1.Themes.Dark,\n    variables: new Map([\n        /*\n         * All Custom CSS Properties from AZNBC Package\n         *\n         * bg: background\n         * fg: foreground\n         */\n        [\"--theme-app-bg\", \"transparent\"],\n        [\"--theme-app-fg\", \"#f3f2f1\"],\n        [\"--theme-app-border\", \"#1b1a19\"],\n        [\"--theme-primary-bg\", \"transparent\"],\n        [\"--theme-primary-bg-hover\", \"transparent\"],\n        [\"--theme-primary-bg-focus\", \"transparent\"],\n        [\"--theme-primary-fg\", \"#f3f2f1\"],\n        [\"--theme-primary-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-primary-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-secondary-bg\", \"#201f1e\"],\n        [\"--theme-secondary-bg-hover\", \"#201f1e\"],\n        [\"--theme-secondary-bg-focus\", \"#201f1e\"],\n        [\"--theme-secondary-fg\", \"#252423\"],\n        [\"--theme-secondary-fg-hover\", \"#292827\"],\n        [\"--theme-secondary-fg-focus\", \"#323130\"],\n        [\"--theme-primary-shadow-hover\", \"0px 0px 6px rgba(0, 0, 0, 0.6)\"],\n        [\"--theme-primary-shadow-focus\", \"box-shadow(0px 0px 8px #000000)\"],\n        [\"--theme-title-bar-bg\", \"#2DFFFE\"],\n        [\"--theme-menu-bg\", \"#3b3a39\"],\n        [\"--theme-menu-bg-hover\", \"#323130\"],\n        [\"--theme-menu-bg-focus\", \"#292827\"],\n        [\"--theme-menu-shadow\", \"var(--theme-primary-shadow-hover)\"],\n        [\"--theme-menu-fg\", \"#f3f2f1\"],\n        [\"--theme-menu-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-menu-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-bg\", \"transparent\"],\n        [\"--theme-cell-shadow-hover\", \"var(--theme-primary-shadow-hover)\"],\n        [\"--theme-cell-shadow-focus\", \"var(--theme-primary-shadow-focus)\"],\n        [\"--theme-cell-vertical-toolbar-button-bg\", \"#323130\"],\n        [\"--theme-cell-vertical-toolbar-button-bg-hover\", \"#484644\"],\n        [\"--theme-cell-vertical-toolbar-button-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-vertical-toolbar-button-fg-hover\", \"#edebe9\"],\n        [\"--theme-cell-state-bar-cell-focused-bg\", \"transparent\"],\n        [\"--theme-cell-state-bar-editor-focused-bg\", \"transparent\"],\n        [\"--theme-cell-state-bar-no-focus-hover-bg\", \"transparent\"],\n        [\"--theme-cell-execute-button-command-mode-bg\", \"#1891e2\"],\n        [\"--theme-cell-execute-button-command-mode-bg-hover\", \"#42a2e2\"],\n        [\"--theme-cell-execute-button-command-mode-fg\", \"#000000\"],\n        [\"--theme-cell-execute-button-command-mode-fg-hover\", \"#000000\"],\n        [\"--theme-cell-execute-button-edit-mode-bg\", \"#66a656\"],\n        [\"--theme-cell-execute-button-edit-mode-bg-hover\", \"#7ab46c\"],\n        [\"--theme-cell-execute-button-edit-mode-fg\", \"#000000\"],\n        [\"--theme-cell-execute-button-edit-mode-fg-hover\", \"#000000\"],\n        [\"--theme-cell-execute-button-hover-bg\", \"#3b3a39\"],\n        [\"--theme-cell-execute-button-hover-bg-hover\", \"#484644\"],\n        [\"--theme-cell-execute-button-hover-fg\", \"#1891e2\"],\n        [\"--theme-cell-execute-button-hover-fg-hover\", \"#1891e2\"],\n        [\"--theme-cell-prompt-bg\", \"#201f1e\"],\n        [\"--theme-cell-prompt-bg-hover\", \"#292827\"],\n        [\"--theme-cell-prompt-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-prompt-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-prompt-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-prompt-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-bg\", \"#201f1e\"],\n        [\"--theme-cell-toolbar-bg-hover\", \"#323130\"],\n        [\"--theme-cell-toolbar-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-toolbar-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-toolbar-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-bg\", \"#252423\"],\n        [\"--theme-cell-menu-bg-hover\", \"#323130\"],\n        [\"--theme-cell-menu-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-menu-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-cell-menu-linktext\", \"0px solid\"],\n        [\"--theme-cell-input-bg\", \"#1e1e1e\"],\n        [\"--theme-cell-input-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-output-bg\", \"transparent\"],\n        [\"--theme-cell-output-bg-hover\", \"transparent\"],\n        [\"--theme-cell-output-bg-focus\", \"transparent\"],\n        [\"--theme-cell-output-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-bg\", \"#252423\"],\n        [\"--theme-cell-creator-bg-hover\", \"#323130\"],\n        [\"--theme-cell-creator-bg-focus\", \"#3b3a39\"],\n        [\"--theme-cell-creator-fg\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-fg-hover\", \"#f3f2f1\"],\n        [\"--theme-cell-creator-fg-focus\", \"#f3f2f1\"],\n        [\"--theme-error-fg\", \"hsl(0, 100%, 95%)\"],\n        [\"--theme-error-bg\", \"hsl(0, 100%, 30%)\"],\n        [\"--theme-pager-bg\", \"#111\"],\n        [\"--theme-cell-border-width\", \"0\"],\n        [\"--theme-cell-input-border-width\", \"1px\"],\n        [\"--theme-cell-input-border-color\", \"#323130\"],\n        [\"--theme-cell-input-active-border-width\", \"1px\"],\n        [\"--prompt-width\", \"0px\"]\n    ]),\n    monacoTheme: {\n        base: \"vs-dark\",\n        inherit: true,\n        rules: [],\n        colors: {\n            // We want Monaco background to use the same background for our themes.\n            // Setting the background to transparent\n            \"editor.background\": \"#00000000\"\n        }\n    }\n};\n//# sourceMappingURL=theme.js.map","import React from \"react\";\nimport { PageName } from \"../notebookViewController\";\n\nexport interface ITabProps {\n  id: number;\n  name: PageName;\n  isActive?: boolean;\n  isDisabled?: boolean;\n  onClick: () => void;\n}\n\nexport const Tab = React.forwardRef((props: ITabProps, ref?: React.Ref<HTMLAnchorElement>) => {\n  let myClassName = \"nav-item nav-link\";\n  if (props.isActive) {\n    myClassName += \" active\";\n  }\n\n  return (\n    <a\n      id={\"tab\" + props.id.toString()}\n      className={myClassName}\n      role=\"tab\"\n      data-toggle=\"tab\"\n      aria-controls=\"nav-home\"\n      aria-selected=\"true\"\n      data-tabindex=\"0\"\n      onClick={props.onClick}\n      ref={ref}\n    >\n      {props.name}\n    </a>\n  );\n});\n\nTab.displayName = \"Tab\";\n","import React from \"react\";\nimport { TabData } from \"./Tabs\";\n\ninterface ITabDropdownProps {\n  name: string;\n  Tabs: TabData;\n  onClick: (idx: number) => void;\n}\n\nexport const TabDropdown = React.forwardRef((props: ITabDropdownProps, ref?: React.Ref<HTMLAnchorElement>) => {\n  return (\n    <div>\n      <a\n        id={\"navBarDropdown\"}\n        className=\"nav-item nav-link dropdown dropdown-toggle\"\n        role=\"button\"\n        data-toggle=\"dropdown\"\n        aria-controls=\"nav-home\"\n        aria-selected=\"true\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\"\n        data-tabindex=\"0\"\n        ref={ref}\n      >\n        {props.name}\n      </a>\n      <div className=\"dropdown-menu dropdown-menu-right\">\n        {props.Tabs.map(([name, path], idx) => {\n          return <DropdownOption id={idx} key={name + idx} name={name} onClick={props.onClick.bind(path)} />;\n        })}\n      </div>\n    </div>\n  );\n});\n\nTabDropdown.displayName = \"TabDropdown\";\n\ninterface IDropdownOptionProps {\n  id: number;\n  name: string;\n  onClick: (idx: number) => void;\n}\n\nclass DropdownOption extends React.Component<IDropdownOptionProps> {\n  constructor(props: IDropdownOptionProps) {\n    super(props);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick() {\n    this.props.onClick(this.props.id);\n  }\n\n  render() {\n    return (\n      <a id={\"dropdownOption\" + this.props.id.toString()} className=\"dropdown-item\" onClick={this.onClick}>\n        {this.props.name}\n      </a>\n    );\n  }\n}\n","import React from \"react\";\n\nexport interface ITabArrowProps {\n  id: string;\n  isDisabled: boolean;\n  isLeftArrow: boolean;\n  onClick: () => void;\n}\n\nexport const TabArrow = React.forwardRef((props: ITabArrowProps, ref?: React.Ref<HTMLAnchorElement>) => {\n  let classId = \"nav-item nav-link arrow-nav\" + (props.isLeftArrow ? \" arrow-nav-left\" : \" arrow-nav-right\");\n  if (props.isDisabled) {\n    classId += \" disabled\";\n  }\n\n  return (\n    <a\n      id={\"arrow-\" + props.id}\n      className={classId}\n      role=\"tab\"\n      aria-controls=\"nav-home\"\n      aria-selected=\"true\"\n      data-tabindex=\"0\"\n      onClick={props.isDisabled ? undefined : props.onClick}\n      ref={ref}\n    ></a>\n  );\n});\n\nTabArrow.displayName = \"TabArrow\";\n","import React from \"react\";\nimport { PageName, NotebookRelativePath } from \"../notebookViewController\";\nimport { Tab } from \"./Tab\";\nimport { TabDropdown } from \"./TabDropdown\";\nimport { TabArrow } from \"./TabArrow\";\nimport { IActiveTab } from \"core-library\";\n\nexport type IsLocked = boolean;\nexport type TabData = Array<[PageName, NotebookRelativePath, IsLocked]>;\n\ntype IsShown = boolean;\ntype Width = number;\n\nexport interface INotebookTabsProps extends IActiveTab {\n  tabs: TabData;\n  activeTabPath: string;\n  onActivate: (url: string, idx: number) => void;\n}\n\ninterface INotebookTabsState {\n  showNavigationTabs: boolean;\n  navBarStartIndex: number;\n  navBarEndIndex: number;\n  navBarTotalWidth: number;\n}\n\n/*\n    Implements the Tabs Panel which includes the following:\n    1) Navigation Components (Left Arrow, Right Arrow and drop down)\n        - If requried all 3 components are shown.\n    2) List of tabs which activate a page when clicked.\n        - Tabs that don't fit on the clients width are hidden. You can use the nav components to travers them.\n*/\nexport class Tabs extends React.Component<INotebookTabsProps, INotebookTabsState> {\n  // Navigation Components\n  tabContainer: [React.RefObject<HTMLDivElement>, Width];\n  leftArrow: [React.RefObject<HTMLAnchorElement>, Width];\n  rightArrow: [React.RefObject<HTMLAnchorElement>, Width];\n  dropDown: [React.RefObject<HTMLAnchorElement>, Width];\n  tabs: Array<[IsShown, React.RefObject<HTMLAnchorElement>, Width, string, () => void]>;\n\n  resizeTimeout: number | undefined;\n\n  constructor(props: INotebookTabsProps) {\n    super(props);\n    this.select = this.select.bind(this);\n    this.onActivate = this.onActivate.bind(this);\n    this.resizeCallback = this.resizeCallback.bind(this);\n\n    // Populate tabs\n    this.tabs = new Array<[IsShown, React.RefObject<HTMLAnchorElement>, Width, string, () => void]>();\n\n    const leftArrowRef: React.RefObject<HTMLAnchorElement> = React.createRef();\n    this.leftArrow = [leftArrowRef, 0];\n\n    this.props.tabs.forEach(([name, path], idx) => {\n      const ref: React.RefObject<HTMLAnchorElement> = React.createRef();\n      this.tabs.push([true, ref, 0, name, this.onActivate.bind(this, path, idx)]);\n    });\n\n    this.rightArrow = [React.createRef(), 0];\n    this.dropDown = [React.createRef(), 0];\n    this.tabContainer = [React.createRef(), 0];\n\n    this.state = {\n      showNavigationTabs: true,\n      navBarStartIndex: 0,\n      navBarEndIndex: this.tabs.length,\n      anchorRight: false,\n      navBarTotalWidth: 0\n    } as INotebookTabsState;\n  }\n\n  onActivate(url: string, idx: number): void {\n    this.props.onActivate(url, idx);\n  }\n\n  // Handle selecting a tab on the panel. When a dropdown is selected.\n  select(tabIndex: number) {\n    // Index is not in range.\n    if (tabIndex < 0 || tabIndex >= this.props.tabs.length) {\n      return;\n    }\n\n    if (tabIndex < this.state.navBarStartIndex || tabIndex > this.state.navBarEndIndex) {\n      this.repopulate(tabIndex);\n    }\n\n    // Begin activation process\n    this.onActivate(this.props.tabs[tabIndex][1], tabIndex);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeCallback);\n    this.initalizeWidths();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  componentDidUpdate(prevProps: INotebookTabsProps, prevState: INotebookTabsState) {\n    // In case the index is not in the current display, call select\n    if (\n      prevProps.activeTabIndex != this.props.activeTabIndex ||\n      this.props.activeTabIndex > this.state.navBarEndIndex\n    ) {\n      this.select(this.props.activeTabIndex);\n    }\n  }\n\n  initalizeWidths() {\n    // Get lengths of Navbar compoenents (left arrow, rigth arrow and drop down)\n    this.leftArrow[1] = this.leftArrow[0].current?.offsetWidth ?? 0;\n    this.rightArrow[1] = this.rightArrow[0].current?.offsetWidth ?? 0;\n    this.dropDown[1] = this.dropDown[0].current?.offsetWidth ?? 0;\n    this.tabContainer[1] = this.tabContainer[0].current?.offsetWidth ?? 0;\n\n    // Start Total width with arrow lengths\n    let totalWidth = this.leftArrow[1] + this.rightArrow[1] + this.dropDown[1] + 30;\n\n    let shouldDisplay = true;\n    let updateNavBarEndIndex: number = this.tabs.length - 1;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    this.tabs = this.tabs.map(([isShown, ref, width, name, onclick], idx) => {\n      const currentWidth = ref.current?.offsetWidth ?? 0;\n      totalWidth += currentWidth;\n      if (shouldDisplay && totalWidth > this.tabContainer[1]) {\n        // Navbar Index ends here. Use the previous index\n        updateNavBarEndIndex = idx - 1;\n        shouldDisplay = false;\n      }\n\n      return [shouldDisplay, ref, currentWidth, name, onclick];\n    });\n\n    this.setState({\n      showNavigationTabs: !shouldDisplay,\n      navBarEndIndex: updateNavBarEndIndex,\n      navBarTotalWidth: totalWidth\n    });\n  }\n\n  // Tab Panel:  | < | Tab1 | Tab2 | *Active Tab3 *| > | ... |\n  // An active tab on the right most side of the tab panel is anchored/stuck to the corner.\n  // Resizing or clicking on the right most arrow will make sure that it is always active in the\n  // same spot.\n  repopulateRightAnchored(tabIndex: number, totalWidth: number) {\n    let shouldDisplay = false;\n    // We iterate through the tabs from the other end (reverse map).\n    for (let idx = this.tabs.length - 1; idx >= 0; idx--) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const [isShown, ref, width, name, onclick] = this.tabs[idx];\n\n      if (idx == tabIndex) {\n        shouldDisplay = true;\n      } else if (idx > tabIndex) {\n        shouldDisplay = false;\n      }\n\n      if (shouldDisplay) {\n        totalWidth += width;\n        if (totalWidth > (this.tabContainer[1] ?? 0)) {\n          // Looks like we have run out of space, lets use the last index we came across (in revesre so +)\n          this.setState({\n            navBarStartIndex: idx + 1,\n            navBarEndIndex: tabIndex,\n            showNavigationTabs: true\n          });\n          shouldDisplay = false;\n        }\n      }\n\n      this.tabs[idx] = [shouldDisplay, ref, width, name, onclick];\n    }\n  }\n\n  repopulateLeftAnchored(tabIndex: number, totalWidth: number, isResize: boolean) {\n    let shouldDisplay = false;\n    for (let idx = 0; idx < this.tabs.length; idx++) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const [isShown, ref, width, name, onclick] = this.tabs[idx];\n      if (idx == tabIndex) {\n        shouldDisplay = true;\n      } else if (isResize && idx < tabIndex) {\n        shouldDisplay = false;\n      }\n\n      if (shouldDisplay) {\n        totalWidth += width;\n\n        if (totalWidth > (this.tabContainer[1] ?? 0)) {\n          // Looks like we are out of space, use the last index that worked.\n          this.setState({\n            navBarStartIndex: tabIndex,\n            navBarEndIndex: idx - 1,\n            showNavigationTabs: true\n          });\n          shouldDisplay = false;\n        }\n      }\n\n      this.tabs[idx] = [shouldDisplay, ref, width, name, onclick];\n    }\n  }\n\n  repopulate(tabIndex: number) {\n    // track the allocated pixel width\n    const totalWidth = this.leftArrow[1] + this.rightArrow[1] + this.dropDown[1] + 30;\n\n    if (\n      (this.tabContainer[0].current?.clientWidth &&\n        this.tabContainer[1] == this.tabContainer[0].current.clientWidth && // ref's are loaded, and we aren't in the middle of a resize\n        tabIndex >= 0 &&\n        tabIndex < this.props.tabs.length && // Is not an incorrect index value\n        tabIndex < this.state.navBarStartIndex) ||\n      tabIndex > this.state.navBarEndIndex\n    ) {\n      // Check if tabs need an update.\n\n      // Get the base width, with some padding.\n      if (tabIndex > this.state.navBarEndIndex) {\n        this.repopulateRightAnchored(tabIndex, totalWidth);\n      } else {\n        this.repopulateLeftAnchored(tabIndex, totalWidth, false);\n      }\n    } else if (\n      this.tabContainer[0].current?.clientWidth &&\n      this.tabContainer[1] != this.tabContainer[0].current.clientWidth\n    ) {\n      // Reset the tab container width to the new size.\n      const shouldUseRightAnchored = tabIndex == this.state.navBarEndIndex && this.state.navBarStartIndex != 0;\n      this.tabContainer[1] = this.tabContainer[0].current.clientWidth;\n\n      if (this.state.navBarTotalWidth > this.tabContainer[1]) {\n        // Looks like we need to resize\n        if (shouldUseRightAnchored) {\n          this.repopulateRightAnchored(tabIndex, totalWidth);\n        } else {\n          this.repopulateLeftAnchored(tabIndex, totalWidth, true);\n        }\n      }\n\n      this.forceUpdate();\n    }\n  }\n\n  resizeCallback() {\n    // Everytime reset is called we resize. If this gets too expensive\n    // we should \"debouce\" this. Use setIntercal with a small timeout (100 ms).\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(this.repopulate.bind(this, this.props.activeTabIndex) as TimerHandler, 200);\n  }\n\n  render() {\n    return (\n      <div id=\"tabContainer\" ref={this.tabContainer[0]}>\n        <nav>\n          <div id=\"nav-tabs\" className=\"nav nav-tabs tabs-sm dark-tabs window-tabs\" role=\"tablist\">\n            {this.state.showNavigationTabs ? (\n              <TabArrow\n                id={\"left\"}\n                key=\"leftArrow\"\n                isDisabled={this.props.activeTabIndex == 0}\n                isLeftArrow={true}\n                onClick={this.select.bind(this, this.props.activeTabIndex - 1)}\n                ref={this.leftArrow[0]}\n              ></TabArrow>\n            ) : null}\n            {this.tabs.map(([isShown, ref, , name, onClick], idx) => {\n              if (isShown) {\n                return (\n                  <Tab\n                    id={idx}\n                    name={name}\n                    key={idx}\n                    isActive={idx == this.props.activeTabIndex}\n                    onClick={onClick}\n                    ref={ref}\n                  />\n                );\n              }\n            })}\n            {this.state.showNavigationTabs ? (\n              <TabArrow\n                id={\"right\"}\n                key=\"rightArrow\"\n                isDisabled={this.props.activeTabIndex == this.props.tabs.length - 1}\n                isLeftArrow={false}\n                onClick={this.select.bind(this, this.props.activeTabIndex + 1)}\n                ref={this.rightArrow[0]}\n              ></TabArrow>\n            ) : null}\n            {this.state.showNavigationTabs ? (\n              <TabDropdown\n                name=\"...\"\n                key=\"tabDropdown\"\n                onClick={this.select.bind(this)}\n                Tabs={this.props.tabs}\n                ref={this.dropDown[0]}\n              />\n            ) : null}\n          </div>\n        </nav>\n      </div>\n    );\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeCallback);\n  }\n}\n","import { MockIpcTelemetry, IIpcTelemetry } from \"core-library\";\n\ndeclare const window: { ipcTelemetry: IIpcTelemetry | undefined };\n\n/**\n * Create an instance of ipcTelemetry\n */\nfunction initIpcTelemetry() {\n  return window.ipcTelemetry || (new MockIpcTelemetry() as IIpcTelemetry);\n}\n\n/** A singleton instance of ipcTelemetry */\nlet ipcTelemetry: IIpcTelemetry | undefined;\n\n/**\n * Get instance of ipcTelemetry\n */\nexport function getIpcTelemetry() {\n  if (ipcTelemetry === undefined) {\n    ipcTelemetry = initIpcTelemetry();\n    ipcTelemetry.register(\"Everglade\", location.href, \"initialization\");\n  }\n\n  return ipcTelemetry;\n}\n","import React from \"react\";\nimport { NotebookParentElementId } from \"../types\";\nimport { getIpcTelemetry } from \"../telemetry\";\n\nexport interface INotebookProps {\n  notebookUrl: string;\n  activate: (url: string) => Promise<void>;\n}\n\n/**\n * log aznb errors\n *\n * @param error error to emit\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction aznbErrorListener(error: Event) {\n  getIpcTelemetry().error(error);\n}\n\nexport class Notebook extends React.Component<INotebookProps> {\n  constructor(props: INotebookProps) {\n    super(props);\n  }\n\n  async componentDidMount() {\n    const rootElement = document.getElementById(NotebookParentElementId);\n    if (!rootElement) {\n      console.warn(\n        `HTMLElement with ID '${NotebookParentElementId}' does not exist. Telemetry of aznb-error events will be turned off.`\n      );\n    } else {\n      rootElement.addEventListener(\"aznb-error\", aznbErrorListener);\n    }\n\n    this.props.activate(this.props.notebookUrl);\n  }\n\n  async componentDidUpdate() {\n    this.props.activate(this.props.notebookUrl);\n  }\n\n  componentWillUnmount() {\n    const rootElement = document.getElementById(NotebookParentElementId);\n    if (rootElement) {\n      rootElement.removeEventListener(\"aznb-error\", aznbErrorListener);\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  shouldComponentUpdate(_: INotebookProps, nextState: INotebookProps) {\n    return _.notebookUrl !== this.props.notebookUrl;\n  }\n\n  render() {\n    return (\n      <div id=\"tab-content\" className=\"window-tab\">\n        <div className=\"tab-pane fade show active\" id={NotebookParentElementId} role=\"tabpanel\"></div>\n      </div>\n    );\n  }\n}\n","/* eslint-disable @typescript-eslint/no-namespace */\nimport { Locale } from \"extension-minecraft/lib/types\";\n\n// Minecraft Interface for communicating.\n// eslint-disable-next-line @typescript-eslint/interface-name-prefix\nexport interface IpcRenderer {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  sendToHost(event: string, body: any): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  on(event: string, body: any): void;\n}\n\nexport interface ITabData {\n  id: number; // Not sure why we need this. Maps to page_id under metadata\n  title: string; // Contains the title. This should have a size limit.\n}\n\nexport const NotebookParentElementId = \"notebook-container\";\n\nexport interface INotebookLoader {\n  loadComponent: (filepath: string) => Promise<void>;\n  initalize(language: Locale): Promise<void>;\n}\n\nexport declare namespace TelemetryEvents {\n  // eslint-disable-next-line @typescript-eslint/interface-name-prefix\n  export interface Component {\n    id: string;\n    timeElapsed?: number;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    details?: any;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/interface-name-prefix\n  export interface Components {\n    components: Component[];\n  }\n}\n\nexport interface ISettings {\n  logToConsole: boolean;\n  locale: Locale;\n}\n","import React from \"react\";\n\ninterface IFooterButton {\n  onClick: () => void;\n}\n\ninterface IFooterButtonsProps {\n  previousButton?: IFooterButton;\n  nextButton?: IFooterButton;\n}\n\nexport class FooterButtons extends React.Component<IFooterButtonsProps> {\n  constructor(props: IFooterButtonsProps) {\n    super(props);\n  }\n\n  render() {\n    const classes = \"footer-button __ButtonLiteGrey arrow-nav\";\n    const classesLeft = classes + \" arrow-nav-left\";\n    const classesRight = classes + \" arrow-nav-right\";\n\n    return (\n      <div id=\"footerButtons\" className=\"footer_controls\">\n        <button\n          id={\"footerButtonPrevious\"}\n          className={classesLeft + (this.props.previousButton ? \"\" : \" disabled\")}\n          disabled={this.props.previousButton == undefined}\n          onClick={this.props.previousButton?.onClick}\n        >\n          <i className=\"icon icon_chevron-down\" aria-hidden=\"true\"></i>\n        </button>\n        <button\n          id={\"footerButtonNext\"}\n          className={classesRight + (this.props.nextButton ? \"\" : \" disabled\")}\n          disabled={this.props.nextButton == undefined}\n          onClick={this.props.nextButton?.onClick}\n        >\n          <i className=\"icon icon_chevron-down\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    );\n  }\n}\n","// This file is for loading the lesson and notebook information.\n// These functions will take in the lesson json file and load\n// All the appropriate notebooks into tabs.\n\nimport { INotebookLoader, TelemetryEvents } from \"./types\";\nimport {\n  ILessonData,\n  NotebookContentProvider,\n  IIpcTelemetry,\n  MinecraftCommander,\n  MockMinecraftCommander,\n  IIpcRenderer,\n  IActiveTabProvider,\n  ActiveTabProvider,\n  IActiveTab\n} from \"core-library\";\nimport { IMcParams } from \"core-library\";\nimport React from \"react\";\nimport { INotebookTabsProps, TabData, Tabs } from \"./components/Tabs\";\nimport { Notebook } from \"./components/Notebook\";\nimport { Locale } from \"extension-minecraft/lib/types\";\nimport { GetLessonDataFunctor } from \"./lessonData\";\nimport { getIpcTelemetry } from \"./telemetry\";\nimport { FooterButtons } from \"./components/FooterButtons\";\n\nexport type PageId = string;\nexport type PageName = string;\nexport type NotebookRelativePath = string;\nexport type IsLocked = boolean;\n\ndeclare const window: {\n  ipcRenderer: IIpcRenderer | undefined;\n};\n\nexport interface INotebookControllerProps {\n  getLessonData: GetLessonDataFunctor;\n  azureNotebookLoader: INotebookLoader;\n  contentProvider: NotebookContentProvider;\n  params: IMcParams;\n}\n\ninterface INotebookControllerState {\n  // Since we start initalization after mounting. Flag to indicate loading has completed.\n  hasLoaded: boolean;\n  tabProps: INotebookTabsProps;\n}\n\n/*\n    ViewController that handles entrypoint into out app. Similar to App.tsx.\n    We are currently not using any off the shelf controller, since we just need one.\n\n    Current App lifecycle:\n    - Constructor - Sets up post mounting initalization functor. The functor does the following:\n        - Fetches the lessonData (lesson.json)\n        - Iniitalizes the Azure Notebook Components.\n        - Parses the lesson.json and downloads all notebooks.\n    - Render - Either renders a loading acreen or Actual Tabs/Notebook after it is available.\n    - OnComponentMounted  - Begins executing the above functor.\n*/\nexport class NotebookViewController extends React.Component<INotebookControllerProps, INotebookControllerState> {\n  // LessonData is populated after the Component has mounted.\n  private LessonData?: ILessonData;\n  private TelemetryProvider?: IIpcTelemetry;\n  private ActiveTabProvider?: IActiveTabProvider;\n\n  constructor(props: INotebookControllerProps) {\n    super(props);\n\n    this.state = {\n      hasLoaded: false,\n      tabProps: {\n        tabs: [],\n        activeTabPath: \"\"\n      }\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } as any;\n\n    this.onActivate = this.onActivate.bind(this);\n    this.onActivateByIndex = this.onActivateByIndex.bind(this);\n  }\n\n  // Start initalization after the initial app frame has loaded. Minecraft depends on scripts\n  // being injected, and each platform has a different timing. The best time would be after the\n  // component has moundtes.\n  async componentDidMount() {\n    this.ActiveTabProvider = new ActiveTabProvider(\n      localStorage,\n      window?.ipcRenderer ? MinecraftCommander.getInstance(window.ipcRenderer) : new MockMinecraftCommander()\n    );\n    this.TelemetryProvider = getIpcTelemetry();\n\n    let component = \"\";\n    const initEvent: TelemetryEvents.Components = { components: [] };\n\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const telemetry = async (comp: string, func: () => any | undefined) => {\n        component = comp;\n        const startTime = performance.now();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const details: any = await func();\n        const timeElapsed = Math.trunc(performance.now() - startTime);\n        initEvent.components.push({\n          id: component,\n          timeElapsed: timeElapsed,\n          details: details\n        } as TelemetryEvents.Component);\n      };\n\n      await telemetry(\"getLessonData\", async () => {\n        this.LessonData = await this.props.getLessonData();\n        this.TelemetryProvider?.setName(`Everglade:${this.LessonData.creatorName}:${this.LessonData.title}`);\n      });\n\n      await telemetry(\"aznb::initalize\", async () => {\n        await this.props.azureNotebookLoader.initalize(this.props.params.language as Locale);\n      });\n\n      await telemetry(\"loadNotebooks\", async () => {\n        const tabProps: INotebookTabsProps = await this.load();\n        this.setState({ hasLoaded: true, tabProps: tabProps });\n        return { notebookCount: tabProps.tabs?.length };\n      });\n    } catch (error) {\n      const e: Error = error;\n      this.TelemetryProvider?.error({\n        component: component,\n        message: e.message\n      });\n      this.setState(() => {\n        throw e;\n      });\n      throw error;\n    } finally {\n      this.TelemetryProvider?.log(initEvent);\n    }\n  }\n\n  // Gets the path of a notebook based on supported languages.\n  private getNotebookPath(filename: string): string {\n    // When we go offline, we will need to fix this seperator based. Maybe the filesystem will ignore it.\n    const seperator = \"/\";\n\n    // en-us is the default language and shouldn't have its own folder.\n    if (\n      this.props.params.language &&\n      this.LessonData &&\n      this.LessonData.isLanguageSupported(this.props.params.language, this.LessonData.additionalLanguages)\n    ) {\n      return this.props.params.rootNotebookPath + this.props.params.language + seperator + filename + \".ipynb\";\n    } else {\n      return this.props.params.rootNotebookPath + filename + \".ipynb\";\n    }\n  }\n\n  private async load(): Promise<INotebookTabsProps> {\n    if (this.LessonData) {\n      const tabIndexFunctor = this.ActiveTabProvider?.get(\n        this.props.params.lessonJsonPath,\n        this.LessonData?.activityTracker?.data?.activitySelectorObjective,\n        (data: IActiveTab) => {\n          // Ignore calls that occur before loading is complete.\n          if (\n            this.state.hasLoaded &&\n            this.state.tabProps?.tabs &&\n            data.activeTabIndex > 0 &&\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            data.activeTabIndex < tabs.length\n          ) {\n            this.onActivate(this.state.tabProps.tabs[data.activeTabIndex][1], data.activeTabIndex);\n          }\n        }\n      ).then((activeTab) => {\n        return activeTab ? activeTab : ({ activeTabIndex: 0 } as IActiveTab);\n      });\n\n      const pagePaths = await Promise.all(\n        this.LessonData.pages.map(async (page) => {\n          const path = this.getNotebookPath(page);\n          try {\n            const notebook = await this.props.contentProvider.get(path, true);\n            // TODO: Validate Metadata Minecraft\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const metadata = notebook.metadata as any;\n            return [metadata.minecraft.page_name, path] as [PageName, NotebookRelativePath];\n          } catch (error) {\n            const e = new Error(\"Notebook could not be loaded from path: \" + path);\n            throw e;\n          }\n        })\n      );\n\n      const tabIndex = await tabIndexFunctor;\n      const tabs: TabData = [];\n      for (const [name, path] of pagePaths) {\n        tabs.push([name, path, false]);\n      }\n\n      const index =\n        tabIndex !== undefined && tabIndex.activeTabIndex >= 0 && tabIndex.activeTabIndex < tabs.length\n          ? tabIndex.activeTabIndex\n          : 0;\n\n      return {\n        tabs,\n        activeTabPath: pagePaths[index][1],\n        activeTabIndex: index\n      } as INotebookTabsProps;\n    } else {\n      throw new Error(\"Notebook Controller Loading failed: LessonData cant be empty.\");\n    }\n  }\n\n  onActivate(url: string, idx: number) {\n    const tabProps = this.state.tabProps;\n    tabProps.activeTabPath = url;\n    tabProps.activeTabIndex = idx;\n    this.setState({ hasLoaded: true, tabProps: tabProps });\n  }\n\n  onActivateByIndex(idx: number) {\n    this.onActivate(this.getTabPathFromIndex(idx), idx);\n  }\n\n  getTabPathFromIndex(index: number): string {\n    let path = \"\";\n    for (let idx = 0; idx < this.state.tabProps.tabs.length; idx++) {\n      if (index === idx) {\n        path = this.state.tabProps.tabs[idx][1];\n      }\n    }\n    return path;\n  }\n\n  public render() {\n    if (!this.state.hasLoaded) {\n      return (\n        <span className=\"page-loader\">\n          <img />\n        </span>\n      );\n    } else {\n      this.TelemetryProvider?.setContext(\"loaded\");\n      return (\n        <div id=\"page\" className=\"pageBody\">\n          <div id=\"body\">\n            <Tabs\n              tabs={this.state.tabProps.tabs}\n              activeTabPath={this.state.tabProps.activeTabPath}\n              activeTabIndex={this.state.tabProps.activeTabIndex}\n              onActivate={this.onActivate}\n            />\n\n            <div className=\"scroll-pane-wrapper\">\n              <div id=\"#scroll-pane\" className=\"scroll-target\">\n                <Notebook\n                  notebookUrl={this.state.tabProps.activeTabPath}\n                  activate={async (url: string) => {\n                    return this.props.azureNotebookLoader.loadComponent(url);\n                  }}\n                />\n                <FooterButtons\n                  previousButton={\n                    this.state.tabProps.activeTabIndex == 0\n                      ? undefined\n                      : { onClick: this.onActivateByIndex.bind(this, this.state.tabProps.activeTabIndex - 1) }\n                  }\n                  nextButton={\n                    this.state.tabProps.activeTabIndex == this.state.tabProps.tabs.length - 1\n                      ? undefined\n                      : { onClick: this.onActivateByIndex.bind(this, this.state.tabProps.activeTabIndex + 1) }\n                  }\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n","export default {\n  ErrorBoundaryMessage:\n    \"An unexpected error has occured while trying to load Azure Notebooks. Try exiting and re-opening.\",\n  ErrorInfoPrefix: \"Error Info: \"\n};\n","import { ISettings } from \"./types\";\n\nexport const settings: ISettings = {\n  logToConsole: true,\n  locale: \"en-us\"\n};\n","import en from \"./en\";\nimport { settings } from \"../evergladeSettings\";\nimport LocalizedStrings from \"react-localization\";\nimport zhCn from \"./zh-cn\";\n\ntype ILanguageStrings = typeof en;\n\n// Append \"PS_\" prefix to every string to create a pesudo language pack\nconst createPesudoStrings = (origin: ILanguageStrings): ILanguageStrings => {\n  const result = {} as ILanguageStrings;\n  Object.keys(origin).forEach((k: keyof ILanguageStrings) => {\n    result[k] = \"PS_\" + origin[k];\n  });\n\n  return result;\n};\n\nconst ps = createPesudoStrings(en);\n\nconst strings = new LocalizedStrings({\n  \"en-us\": en,\n  \"ps-ps\": ps,\n  \"zh-cn\": zhCn\n});\n\nstrings.setLanguage(\"en-us\");\n\nexport const getLocStrings = () => {\n  if (settings.locale !== strings.getLanguage()) {\n    strings.setLanguage(settings.locale);\n  }\n  return strings;\n};\n","export default {\n  ErrorBoundaryMessage:\n    \"An unexpected error has occured while trying to load Azure Notebooks. Try exiting and re-opening.\",\n  ErrorInfoPrefix: \"Error Info: \"\n};\n","import React from \"react\";\nimport { IIpcTelemetry } from \"core-library\";\nimport { getIpcTelemetry } from \"../telemetry\";\nimport { getLocStrings } from \"../localization\";\n\ninterface IErrorBoundaryState {\n  hasError: boolean;\n  errorMessage: string;\n}\n\nexport class ErrorBoundary extends React.Component<{}, IErrorBoundaryState> {\n  private telemetryLogger: IIpcTelemetry;\n\n  constructor(props = {}) {\n    super(props);\n    this.state = { hasError: false, errorMessage: \"\" };\n    this.telemetryLogger = getIpcTelemetry();\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, errorMessage: error.message };\n  }\n\n  componentDidCatch(error: Error) {\n    this.telemetryLogger.error(error);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      const locStrings = getLocStrings();\n\n      return (\n        <div className=\"alert alert-danger effect-alert\" role=\"alert\">\n          {locStrings.ErrorBoundaryMessage}\n          <br />\n          {locStrings.ErrorInfoPrefix + this.state.errorMessage}\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import { ILessonData, AdditionalLanguages, ValidateLessonData } from \"core-library\";\n\n/**\n * Check if language is supported\n *\n * @param lang - language to check\n * @param additionalLanguages - language packs to look for the language\n */\nfunction defaultIsLanguageSupported(lang: string, additionalLanguages: AdditionalLanguages) {\n  return !!additionalLanguages && additionalLanguages.includes(lang);\n}\n\nexport type GetLessonDataFunctor = () => Promise<ILessonData>;\n\n/**\n * Retrieves the lesson.json from the given url.\n * We currently don't cache the lesson.json.\n *\n * @param url - url\n */\nexport async function GetLessonData(url: string, bypassCache?: boolean): Promise<ILessonData> {\n  const httpOptions: RequestInit = {\n    method: \"GET\",\n    headers: Object.create(null),\n    mode: \"cors\"\n  };\n\n  if (bypassCache) {\n    httpOptions.cache = \"no-store\";\n  }\n\n  return fetch(url, httpOptions)\n    .then((response: Response) => {\n      return response.json();\n    })\n    .then((json: ILessonData) => {\n      if (ValidateLessonData(json)) {\n        json.isLanguageSupported = defaultIsLanguageSupported;\n        return json;\n      } else {\n        throw new Error(\"Invalid LessonData. title, description and pages are all required values.\");\n      }\n    })\n    .catch((error) => {\n      console.error(`Failed to get lesson data: ${error}`);\n      throw error;\n    });\n}\n","import { INotebookLoader, NotebookParentElementId } from \"./types\";\nimport AzureNotebooks from \"@aznb/extension-contract\";\nimport MinecraftExtension, { mapLocaleToAznbLocale, Locale } from \"extension-minecraft\";\nimport { IIpcTelemetry } from \"core-library\";\nimport { getIpcTelemetry } from \"./telemetry\";\n\n// Load Notebook on specified id\nexport class AzureNotebookLoader implements INotebookLoader {\n  private isInitalized: boolean;\n  private rootElementId: string;\n  private telemetryLogger: IIpcTelemetry;\n  private locale: Locale | undefined;\n\n  constructor(rootElementId: string = NotebookParentElementId) {\n    this.rootElementId = rootElementId;\n    this.isInitalized = false;\n\n    this.telemetryLogger = getIpcTelemetry();\n  }\n\n  public async initalize(language: Locale = \"en-us\"): Promise<void> {\n    this.locale = language;\n    MinecraftExtension.settings.locale = language;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    AzureNotebooks.registerExtension(MinecraftExtension as any);\n\n    return AzureNotebooks.init({\n      resourceUrl: \"https://minecraftresource.notebooks.azure.net\",\n      userHasGivenCookieConsent: false,\n      lazyLoadEditor: false,\n      getResourceIdAndKey: () =>\n        Promise.resolve({\n          notebookResourceId: \"\",\n          notebookResourceKey: \"\"\n        })\n    }).then(() => {\n      this.isInitalized = true;\n    });\n  }\n\n  public async loadComponent(filepath: string): Promise<void> {\n    if (!this.isInitalized) {\n      throw new Error(\"Initalize needs to be called before proceeding.\");\n    }\n\n    const nb = await AzureNotebooks.loadNotebook({\n      parentElementId: this.rootElementId,\n      filePath: filepath, //BUG: filepath must be a url\n      config: {\n        disableOutputIframe: true,\n        showSurveyBar: false,\n        locale: mapLocaleToAznbLocale(this.locale)\n      },\n      extensions: [\"minecraft\"]\n    });\n\n    // This token info is overridden by the extension to use the ipc protocol from Minecraft\n    // Example compute setting: local jupyter host with token auth\n    const compute = {\n      name: \"Local\",\n      targetUrl: \"http://localhost:8888\",\n      getAuthSettings: () =>\n        Promise.resolve({\n          authType: \"token\",\n          token: \"token to access your local jupyter host\"\n        }),\n      shouldMount: false\n    };\n\n    await nb.setCompute({ targetSettings: compute });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ReadUrlParams, ExtractUrlParams, IMcParams } from \"core-library\";\nimport { NotebookViewController } from \"./notebookViewController\";\nimport { ErrorBoundary } from \"./components/ErrorBoundary\";\nimport { GetLessonData } from \"./lessonData\";\nimport { NotebookContentProvider } from \"core-library\";\nimport { AzureNotebookLoader } from \"./azureNotebookLoader\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap/js/dist/util\";\nimport \"bootstrap/js/dist/dropdown\";\nimport \"minecraft-styles/uwux-assets/css/mc_screen.css\";\nimport \"./index.scss\";\n\nconst parameters: IMcParams = ExtractUrlParams();\nconsole.log(`Starting Up Notebooks with the following paramters: ${JSON.stringify(parameters)}`);\n\nReactDOM.render(\n  <ErrorBoundary>\n    <NotebookViewController\n      getLessonData={() => {\n        return GetLessonData(parameters.lessonJsonPath, parameters.disableLessonDataCache);\n      }}\n      azureNotebookLoader={new AzureNotebookLoader()}\n      contentProvider={new NotebookContentProvider(localStorage)}\n      params={parameters}\n    />\n  </ErrorBoundary>,\n  document.getElementById(\"root\")\n);\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_1 = __importDefault(require(\"./config\"));\nconst ButtonsPanel_1 = require(\"./components/ButtonsPanel\");\nconst protocol_1 = require(\"./protocol\");\nconst types_1 = require(\"./types\");\nconst cellSettingsProcessor_1 = require(\"./cellSettingsProcessor\");\nconst extensionSettings_1 = require(\"./extensionSettings\");\nrequire(\"../styles/index.scss\");\nconst theme_1 = require(\"./theme\");\nconst core_library_1 = require(\"core-library\");\nvar extensionSettings_2 = require(\"./extensionSettings\");\nexports.mapLocaleToAznbLocale = extensionSettings_2.mapLocaleToAznbLocale;\n__export(require(\"./types\"));\nconst extension = {\n    name: \"minecraft\",\n    config: config_1.default,\n    activate: (context) => {\n        context.components.register(\"ButtonsPanel\", ButtonsPanel_1.ButtonsPanel);\n        context.compute.registerProtocol(types_1.MyComputeProtocol, protocol_1.createRuntime());\n        context.commands.registerCellSettingsProcessor(\"minecraft-metadata\", cellSettingsProcessor_1.cellSettingsProcessor);\n        const parameters = core_library_1.ExtractUrlParams();\n        context.commands.registerMarkdownImageUriTransformer((url) => {\n            console.log(\"Uri Transformer Called: \" + url);\n            if (/^https?:/.test(url) || url.startsWith(\"/\"))\n                return url;\n            else {\n                let combinedUrl = parameters.rootNotebookPath;\n                if (!combinedUrl.endsWith(\"/\"))\n                    combinedUrl += \"/\";\n                return combinedUrl + url;\n            }\n        });\n        context.theme.registerTheme(\"minecraft\", theme_1.theme);\n    }\n};\nexports.default = Object.assign(Object.assign({}, extension), { settings: extensionSettings_1.settings });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExtensionName = \"minecraft\";\n/**\n * Name of my custom protocol\n */\nexports.MyComputeProtocol = \"minecraft-ipc\";\n/**\n * Namespace for minecraft's own metadata of a cell data entity\n */\nexports.MetadataNamespace = \"minecraft\";\n/**\n * List of all onCodeCommand id's that a cell can contain.\n */\nvar CodeListenerIds;\n(function (CodeListenerIds) {\n    // onCodeStartedCommand: Called just before an execute command is sent to the game.\n    CodeListenerIds[\"onCodeStartedCommand\"] = \"onCodeStartedCommand\";\n    // onCodeStoppedCommand: Called whenever code execution is stopped. This is followed\n    // by a cancelled/successfull/error event.\n    CodeListenerIds[\"onCodeStoppedCommand\"] = \"onCodeStoppedCommand\";\n    CodeListenerIds[\"onCodeCancelledCommand\"] = \"onCodeCancelledCommand\";\n    CodeListenerIds[\"onCodeSuccessfulCommand\"] = \"onCodeSuccessfulCommand\";\n    CodeListenerIds[\"onCodeErrorCommand\"] = \"onCodeErrorCommand\";\n})(CodeListenerIds = exports.CodeListenerIds || (exports.CodeListenerIds = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_contract_1 = require(\"@aznb/core-contract\");\n/**\n * Convert this locale type to Aznb's Locale enum type\n *\n * @param locale - Extension's locale value\n */\nfunction mapLocaleToAznbLocale(locale) {\n    switch (locale) {\n        case \"zh-cn\":\n            return core_contract_1.Locale.zh_Hans;\n        case \"ps-ps\":\n            return core_contract_1.Locale.pseudo;\n        default:\n            return core_contract_1.Locale.en;\n    }\n}\nexports.mapLocaleToAznbLocale = mapLocaleToAznbLocale;\nexports.settings = {\n    logToConsole: true,\n    locale: \"en-us\"\n};\n//# sourceMappingURL=extensionSettings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uuid_1 = require(\"uuid\");\n// Create the JSON data to subscribe to an event\nfunction createSubscribeRequest(eventName, unsubscribe = false) {\n    const header = {\n        requestId: uuid_1.v4(),\n        messagePurpose: \"subscribe\",\n        version: 1,\n        messageType: \"commandRequest\"\n    };\n    const body = {\n        version: 1,\n        eventName: eventName\n    };\n    const request = {\n        header: header,\n        body: body\n    };\n    if (unsubscribe) {\n        request.header.messagePurpose = \"unsubscribe\";\n    }\n    return request;\n}\nfunction createCommandRequest(command) {\n    const header = {\n        requestId: uuid_1.v4(),\n        messagePurpose: \"commandRequest\",\n        version: 1,\n        messageType: \"commandRequest\"\n    };\n    const body = {\n        commandLine: command,\n        version: 1\n    };\n    const request = {\n        header: header,\n        body: body\n    };\n    return request;\n}\nclass GenericCommand {\n    constructor(command, throwOnError) {\n        this.request = createCommandRequest(command);\n        this.throwOnError = throwOnError;\n    }\n    handleError(message) {\n        if (this.throwOnError) {\n            throw new Error(message);\n        }\n    }\n    parse(statusMessage) {\n        throw new Error(\"Command must implement parse.\");\n    }\n    responseHandler(response) {\n        if (response.body.statusCode) {\n            this.handleError(response.body.statusMessage);\n        }\n        else if (response.body) {\n            return this.parse(response.body.statusMessage);\n        }\n        else {\n            this.handleError(\"Incorrect Command Response.\");\n        }\n        return false;\n    }\n}\nexports.GenericCommand = GenericCommand;\nclass GenericListenerCommand {\n    constructor(eventName, throwOnError = false) {\n        this.request = createSubscribeRequest(eventName);\n        this.throwOnError = throwOnError;\n    }\n    handleError(message) {\n        if (this.throwOnError) {\n            throw new Error(message);\n        }\n    }\n    parse(body) {\n        throw new Error(\"Command must implement parse.\");\n    }\n    responseHandler(response) {\n        if (response.body.statusCode) {\n            this.handleError(response.body.statusMessage);\n        }\n        else {\n            this.handleError(\"Incorrect Command Response.\");\n        }\n        return false;\n    }\n}\nexports.GenericListenerCommand = GenericListenerCommand;\n// Executes any command and ignores the response.\nclass AnyCommand extends GenericCommand {\n    constructor(command, throwOnError = false) {\n        super(command, throwOnError);\n    }\n    parse(statusMessage) {\n        return;\n    }\n}\nexports.AnyCommand = AnyCommand;\n//# sourceMappingURL=Commands.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction IsInGame() {\n    const searchParams = window === null || window === void 0 ? void 0 : window.location.search;\n    return searchParams && new URLSearchParams(searchParams).get(\"inGame\") === \"1\";\n}\nexports.IsInGame = IsInGame;\n/**\n * Grab the Url paramters from the browser location object.\n *\n * @param location - Maps to the window.location object\n */\nfunction ExtractUrlParams(location = window.location) {\n    const rootUrl = location.origin + location.pathname.substring(0, location.pathname.lastIndexOf(\"/\"));\n    return ReadUrlParams(window.location.search, rootUrl);\n}\nexports.ExtractUrlParams = ExtractUrlParams;\n/**\n * Parse url parameters from query string\n *\n * @param urlQueryString - query string\n * @param rootUrl - host origin\n */\nfunction ReadUrlParams(urlQueryString, rootUrl = window.location.origin) {\n    var _a, _b, _c;\n    const searchParams = new URLSearchParams(urlQueryString);\n    const lessonJsonPath = searchParams.get(\"lesson\");\n    if (!lessonJsonPath) {\n        throw new Error(\"Invalid Lesson Json.\");\n    }\n    let rootLessonPath = searchParams.get(\"notebookRoot\");\n    if (!rootLessonPath) {\n        const rootPath = lessonJsonPath.substring(0, lessonJsonPath.lastIndexOf(\"/\") + 1);\n        if (rootPath.toLowerCase().startsWith(\"http\")) {\n            rootLessonPath = rootPath;\n        }\n        else {\n            // Looks like a relative url. Azure Notebook Loader expects a complete url.\n            rootLessonPath = rootUrl + \"/\" + rootPath;\n        }\n    }\n    const lang = (_a = searchParams.get(\"lang\")) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase();\n    const debug = ((_b = searchParams.get(\"debugMode\")) === null || _b === void 0 ? void 0 : _b.toLocaleLowerCase()) === \"true\";\n    const inGame = searchParams.get(\"inGame\") === \"1\";\n    const disableLessonDataCache = ((_c = searchParams.get(\"disableLessonDataCache\")) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === \"true\";\n    return {\n        lessonJsonPath: lessonJsonPath,\n        rootNotebookPath: rootLessonPath,\n        language: lang,\n        debug: debug,\n        inGame: inGame,\n        disableLessonDataCache: disableLessonDataCache\n    };\n}\nexports.ReadUrlParams = ReadUrlParams;\n//# sourceMappingURL=UrlReader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MockEvent {\n    constructor() {\n        this.events = {};\n    }\n    on(event, listener) {\n        if (typeof this.events[event] !== \"object\") {\n            this.events[event] = [];\n        }\n        this.events[event].push(listener);\n    }\n    removeListener(event, listener) {\n        var idx;\n        if (typeof this.events[event] === \"object\") {\n            idx = this.events[event].indexOf(listener);\n            if (idx > -1) {\n                this.events[event].splice(idx, 1);\n            }\n        }\n    }\n    once(event, listener) {\n        this.on(event, function g() {\n            this.removeListener(event, g);\n            listener.apply(self, arguments);\n        });\n    }\n    emit(event) {\n        var i, listeners, length;\n        if (typeof this.events[event] === \"object\") {\n            let listeners = this.events[event].slice();\n            let length = listeners.length;\n            for (i = 0; i < length; i++) {\n                listeners[i].apply(self, arguments);\n            }\n        }\n    }\n}\nexports.MockEvent = MockEvent;\n//# sourceMappingURL=mockEvent.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst extensionSettings_1 = require(\"./extensionSettings\");\n// Define a dummy logger for case that logger is disabled.\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => { };\nconst noopLogger = {\n    log: noop,\n    error: noop\n};\nexports.createLogger = (name) => {\n    const formatMsg = (msg) => `${name}: ${msg}`;\n    const loggerTarget = extensionSettings_1.settings.logToConsole === true ? console : noopLogger;\n    return {\n        log: (msg) => loggerTarget.log(formatMsg(msg)),\n        error: (msg) => loggerTarget.error(formatMsg(msg))\n    };\n};\n//# sourceMappingURL=logger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CodeStatus;\n(function (CodeStatus) {\n    CodeStatus[\"notStarted\"] = \"not_started\";\n    CodeStatus[\"inProgress\"] = \"in_progress\";\n    CodeStatus[\"error\"] = \"error\";\n    CodeStatus[\"succeeded\"] = \"succeeded\";\n})(CodeStatus = exports.CodeStatus || (exports.CodeStatus = {}));\n//# sourceMappingURL=ipcWorldStorage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Commands_1 = require(\"./Commands\");\nclass GetScoreboardCommand extends Commands_1.GenericCommand {\n    constructor(objectiveName, selector, throwOnError = false) {\n        super(`scoreboard players get ${selector} ${objectiveName}`, throwOnError);\n    }\n    parse(message) {\n        let num = Number(message);\n        if (!isNaN(num)) {\n            return num;\n        }\n    }\n}\nexports.GetScoreboardCommand = GetScoreboardCommand;\nclass GetAndListenScoreboardCommand extends Commands_1.GenericCommand {\n    constructor(objectiveName, selector, throwOnError = false) {\n        super(`codebuilder subscribe scoreboard ${selector} ${objectiveName}`, throwOnError);\n    }\n    parse(message) {\n        let num = Number(message);\n        return !isNaN(num) ? num : undefined;\n    }\n}\nexports.GetAndListenScoreboardCommand = GetAndListenScoreboardCommand;\nclass CodeBuilderScoreChangedCommand extends Commands_1.GenericListenerCommand {\n    constructor(throwOnError = false) {\n        super(\"CodeBuilderScoreChanged\", throwOnError);\n    }\n    parse(body) {\n        if (body.properties && body.properties.Objective && body.properties.Score !== undefined) {\n            let num = Number(body.properties.Score);\n            if (isNaN(num)) {\n                throw new Error(`CodeBuilderScoreChangedCommand::Parse does not contain a number.: ${body.properties.Score}`);\n            }\n            else {\n                return { Objective: body.properties.Objective, Score: num };\n            }\n        }\n        else {\n            throw new Error(`CodeBuilderScoreChangedCommand::Parse does not contain required values body:${JSON.stringify(body)}`);\n        }\n    }\n}\nexports.CodeBuilderScoreChangedCommand = CodeBuilderScoreChangedCommand;\n//# sourceMappingURL=Scoreboard.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst en_1 = __importDefault(require(\"./en\"));\nconst extensionSettings_1 = require(\"../extensionSettings\");\nconst react_localization_1 = __importDefault(require(\"react-localization\"));\nconst zh_cn_1 = __importDefault(require(\"./zh-cn\"));\n// Append \"PS_\" prefix to every string to create a pesudo language pack\nconst createPesudoStrings = (origin) => {\n    const result = {};\n    Object.keys(origin).forEach((k) => {\n        result[k] = \"PS_\" + origin[k];\n    });\n    return result;\n};\nconst ps = createPesudoStrings(en_1.default);\nconst strings = new react_localization_1.default({\n    \"en-us\": en_1.default,\n    \"ps-ps\": ps,\n    \"zh-cn\": zh_cn_1.default\n});\nstrings.setLanguage(\"en-us\");\nexports.getLocStrings = () => {\n    if (extensionSettings_1.settings.locale !== strings.getLanguage()) {\n        strings.setLanguage(extensionSettings_1.settings.locale);\n    }\n    return strings;\n};\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}